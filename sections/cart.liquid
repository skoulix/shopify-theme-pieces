{%- comment -%}
  Cart Section - Skeleton + Tailwind
{%- endcomment -%}

<section class="bg-[--color-background]">
  <div class="page-container section-spacing">
    <h1 class="text-3xl font-bold tracking-tight text-[--color-text]">{{ 'cart.title' | t }}</h1>

    {% if cart.item_count > 0 %}
      <form action="{{ routes.cart_url }}" method="post" class="mt-12">
        <div class="flow-root">
          <ul role="list" class="-my-6 divide-y divide-[--color-border]">
            {% for item in cart.items %}
              <li class="flex py-6">
                <div class="h-24 w-24 flex-shrink-0 overflow-hidden rounded-[--card-radius] bg-[--color-background-secondary]">
                  {% if item.image %}
                    {{ item.image | image_url: width: 200 | image_tag:
                      class: 'h-full w-full object-cover object-center'
                    }}
                  {% endif %}
                </div>

                <div class="ml-4 flex flex-1 flex-col">
                  <div>
                    <div class="flex justify-between text-base font-medium text-[--color-text]">
                      <h3>
                        <a href="{{ item.url }}">{{ item.product.title }}</a>
                      </h3>
                      <p class="ml-4">{{ item.line_price | money }}</p>
                    </div>
                    {% unless item.product.has_only_default_variant %}
                      <p class="mt-1 text-sm text-[--color-text-secondary]">{{ item.variant.title }}</p>
                    {% endunless %}
                  </div>
                  <div class="flex flex-1 items-end justify-between text-sm">
                    <div class="flex items-center gap-2">
                      <label for="quantity-{{ item.index }}" class="text-[--color-text-secondary]">Qty</label>
                      <input
                        type="number"
                        id="quantity-{{ item.index }}"
                        name="updates[]"
                        value="{{ item.quantity }}"
                        min="0"
                        class="w-16 py-1.5 px-2 text-[--color-text] bg-[--color-background] border border-[--color-border] rounded-[--input-radius] focus:border-[--color-primary] focus:outline-none sm:text-sm"
                        style="border-width: var(--input-border-width);"
                      >
                    </div>

                    <a href="{{ item.url_to_remove }}" class="font-medium text-[--color-primary] hover:opacity-80">
                      {{ 'cart.remove' | t }}
                    </a>
                  </div>
                </div>
              </li>
            {% endfor %}
          </ul>
        </div>

        <div class="mt-10 border-t border-[--color-border] pt-8">
          <div class="flex justify-between text-base font-medium text-[--color-text]">
            <p>Subtotal</p>
            <p>{{ cart.total_price | money }}</p>
          </div>
          <p class="mt-0.5 text-sm text-[--color-text-secondary]">Shipping and taxes calculated at checkout.</p>

          <div class="mt-6 flex flex-col gap-3">
            <button
              type="submit"
              name="checkout"
              class="btn btn--primary btn--full"
            >
              <i class="ph ph-credit-card"></i>
              <span>{{ 'cart.checkout' | t }}</span>
            </button>
            <button
              type="submit"
              name="update"
              class="btn btn--secondary btn--full"
            >
              <i class="ph ph-arrows-clockwise"></i>
              <span>{{ 'cart.update' | t }}</span>
            </button>
          </div>
        </div>
      </form>
    {% else %}
      <div class="mt-12 text-center">
        <i class="ph ph-bag text-6xl text-[--color-border]"></i>
        <h2 class="mt-4 text-lg font-medium text-[--color-text]">Your cart is empty</h2>
        <p class="mt-2 text-sm text-[--color-text-secondary]">Start shopping to add items to your cart.</p>
        <a href="{{ routes.all_products_collection_url }}" class="btn btn--primary mt-6">
          Continue shopping
        </a>
      </div>
    {% endif %}
  </div>
</section>

{% schema %}
{
  "name": "Cart",
  "settings": []
}
{% endschema %}
