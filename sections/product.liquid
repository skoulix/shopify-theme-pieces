{%- comment -%}
  Product Section - Minimal Skeleton + Tailwind UI Design
{%- endcomment -%}

<section class="bg-white">
  <div class="mx-auto max-w-7xl px-4 py-16 sm:px-6 sm:py-24 lg:px-8">
    <div class="lg:grid lg:grid-cols-2 lg:items-start lg:gap-x-12">

      {%- comment -%} Product Images {%- endcomment -%}
      <div class="flex flex-col-reverse">
        {%- comment -%} Main Image {%- endcomment -%}
        <div class="aspect-square w-full overflow-hidden rounded-lg bg-gray-100">
          {% if product.featured_image != blank %}
            {{ product.featured_image | image_url: width: 1200 | image_tag:
              class: 'h-full w-full object-cover object-center',
              loading: 'eager'
            }}
          {% else %}
            <div class="flex h-full items-center justify-center">
              <i class="ph ph-image text-6xl text-gray-300"></i>
            </div>
          {% endif %}
        </div>

        {%- comment -%} Thumbnail Gallery {%- endcomment -%}
        {% if product.images.size > 1 %}
          <div class="mt-4 grid grid-cols-4 gap-4">
            {% for image in product.images limit: 4 %}
              <button class="relative aspect-square overflow-hidden rounded-lg bg-gray-100 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2">
                {{ image | image_url: width: 300 | image_tag:
                  class: 'h-full w-full object-cover object-center'
                }}
              </button>
            {% endfor %}
          </div>
        {% endif %}
      </div>

      {%- comment -%} Product Info {%- endcomment -%}
      <div class="mt-10 px-4 sm:mt-16 sm:px-0 lg:mt-0">
        <h1 class="text-3xl font-bold tracking-tight text-gray-900">{{ product.title }}</h1>

        {%- comment -%} Price {%- endcomment -%}
        <div class="mt-3">
          <p class="text-3xl tracking-tight text-gray-900">{{ product.price | money }}</p>
          {% if product.compare_at_price > product.price %}
            <p class="mt-1 text-sm text-gray-500 line-through">{{ product.compare_at_price | money }}</p>
          {% endif %}
        </div>

        {%- comment -%} Description {%- endcomment -%}
        <div class="mt-6">
          <div class="prose prose-sm text-gray-600">
            {{ product.description }}
          </div>
        </div>

        {%- comment -%} Product Form {%- endcomment -%}
        <div class="mt-8">
          {% form 'product', product %}
            {% assign current_variant = product.selected_or_first_available_variant %}

            <input type="hidden" name="id" value="{{ current_variant.id }}">

            {%- comment -%} Variant Selector {%- endcomment -%}
            {% if product.variants.size > 1 %}
              <div class="mb-6">
                <label for="variant-select" class="block text-sm font-medium text-gray-700">Options</label>
                <select
                  id="variant-select"
                  name="id"
                  class="mt-2 block w-full rounded-md border-0 py-3 pl-3 pr-10 text-gray-900 ring-1 ring-inset ring-gray-300 focus:ring-2 focus:ring-indigo-600 sm:text-sm"
                >
                  {% for variant in product.variants %}
                    <option
                      value="{{ variant.id }}"
                      {% if variant == current_variant %}selected{% endif %}
                      {% unless variant.available %}disabled{% endunless %}
                    >
                      {{ variant.title }} - {{ variant.price | money }}
                      {% unless variant.available %} (Sold out){% endunless %}
                    </option>
                  {% endfor %}
                </select>
              </div>
            {% endif %}

            {%- comment -%} Quantity {%- endcomment -%}
            <div class="mb-6">
              <label for="quantity" class="block text-sm font-medium text-gray-700">Quantity</label>
              <input
                type="number"
                id="quantity"
                name="quantity"
                value="1"
                min="1"
                class="mt-2 block w-20 rounded-md border-0 py-2 px-3 text-gray-900 ring-1 ring-inset ring-gray-300 focus:ring-2 focus:ring-indigo-600 sm:text-sm"
              >
            </div>

            {%- comment -%} Add to Cart Button {%- endcomment -%}
            <button
              type="submit"
              class="flex w-full items-center justify-center rounded-md border border-transparent bg-indigo-600 px-8 py-3 text-base font-medium text-white hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2 disabled:bg-gray-300 disabled:cursor-not-allowed"
              {% unless current_variant.available %}disabled{% endunless %}
            >
              {% if current_variant.available %}
                <i class="ph ph-bag mr-2"></i>Add to cart
              {% else %}
                Sold out
              {% endif %}
            </button>

            {%- comment -%} Dynamic Checkout {%- endcomment -%}
            <div class="mt-4 [&_.shopify-payment-button__button]:rounded-md [&_.shopify-payment-button__button]:py-3">
              {{ form | payment_button }}
            </div>
          {% endform %}
        </div>
      </div>

    </div>
  </div>
</section>

{% schema %}
{
  "name": "Product",
  "settings": [],
  "disabled_on": {
    "groups": ["header", "footer"]
  }
}
{% endschema %}
