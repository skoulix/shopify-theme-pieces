{%- comment -%}
  Newsletter Section - Standalone newsletter signup
  Three design options: side-by-side, stacked, card
  Colors inherited from color scheme via CSS variables
  Animations handled by global TweenManager via data-tween attributes in snippets
{%- endcomment -%}

{%- liquid
  capture container_class
    render 'container-class', full_width: section.settings.full_width, full_class: 'container-fluid'
  endcapture
-%}

<div class="newsletter-section color-{{ section.settings.color_scheme }}">
  {% case section.settings.design %}
    {% when 'side-by-side' %}
      {% render 'newsletter-side-by-side',
        title: section.settings.title,
        text: section.settings.text,
        button_text: section.settings.button_text,
        button_style: section.settings.button_style,
        button_color: section.settings.button_color,
        privacy_text: section.settings.privacy_text,
        privacy_link: section.settings.privacy_link,
        privacy_link_text: section.settings.privacy_link_text,
        container_class: container_class
      %}

    {% when 'stacked' %}
      {% render 'newsletter-stacked',
        title: section.settings.title,
        text: section.settings.text,
        button_text: section.settings.button_text,
        button_style: section.settings.button_style,
        button_color: section.settings.button_color,
        privacy_text: section.settings.privacy_text,
        privacy_link: section.settings.privacy_link,
        privacy_link_text: section.settings.privacy_link_text,
        container_class: container_class
      %}

    {% when 'card' %}
      {% render 'newsletter-card',
        title: section.settings.title,
        text: section.settings.text,
        button_text: section.settings.button_text,
        button_style: section.settings.button_style,
        button_color: section.settings.button_color,
        privacy_text: section.settings.privacy_text,
        privacy_link: section.settings.privacy_link,
        privacy_link_text: section.settings.privacy_link_text,
        container_class: container_class
      %}
  {% endcase %}
</div>

{% schema %}
{
  "name": "Newsletter",
  "tag": "section",
  "settings": [
    {
      "type": "select",
      "id": "design",
      "label": "Design",
      "default": "side-by-side",
      "options": [
        { "value": "side-by-side", "label": "Side by side" },
        { "value": "stacked", "label": "Stacked" },
        { "value": "card", "label": "Card" }
      ]
    },
    {
      "type": "header",
      "content": "Content"
    },
    {
      "type": "text",
      "id": "title",
      "label": "Title",
      "default": "Want product news and updates?"
    },
    {
      "type": "textarea",
      "id": "text",
      "label": "Description",
      "default": "Subscribe to our newsletter for exclusive updates and special offers.",
      "info": "Used in Stacked and Card designs"
    },
    {
      "type": "text",
      "id": "button_text",
      "label": "Button text",
      "default": "Subscribe"
    },
    {
      "type": "select",
      "id": "button_style",
      "label": "Button style",
      "default": "solid",
      "options": [
        { "value": "solid", "label": "Solid" },
        { "value": "outline", "label": "Outline" }
      ]
    },
    {
      "type": "select",
      "id": "button_color",
      "label": "Button color",
      "default": "primary",
      "options": [
        { "value": "primary", "label": "Primary (accent)" },
        { "value": "secondary", "label": "Secondary (neutral)" }
      ]
    },
    {
      "type": "header",
      "content": "Privacy notice"
    },
    {
      "type": "text",
      "id": "privacy_text",
      "label": "Privacy text",
      "default": "We care about your data. Read our",
      "info": "Displayed below the form"
    },
    {
      "type": "url",
      "id": "privacy_link",
      "label": "Privacy policy link"
    },
    {
      "type": "text",
      "id": "privacy_link_text",
      "label": "Privacy link text",
      "default": "privacy policy"
    },
    {
      "type": "header",
      "content": "Layout"
    },
    {
      "type": "checkbox",
      "id": "full_width",
      "default": false,
      "label": "Full width"
    },
    {
      "type": "header",
      "content": "Colors"
    },
    {
      "type": "color_scheme",
      "id": "color_scheme",
      "label": "Color scheme",
      "default": "scheme-2"
    }
  ],
  "presets": [
    {
      "name": "Newsletter",
      "category": "Marketing",
      "settings": {
        "design": "side-by-side"
      }
    }
  ],
  "disabled_on": {
    "groups": ["header", "footer"]
  }
  }
{% endschema %}
