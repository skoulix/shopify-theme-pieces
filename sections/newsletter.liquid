{%- comment -%}
  Newsletter Section - Standalone newsletter signup
  Three design options: side-by-side, stacked, card
  Colors inherited from color scheme via CSS variables
  Animations handled by global TweenManager via data-tween attributes in snippets
{%- endcomment -%}

{%- liquid
  capture container_class
    render 'container-class', full_width: section.settings.full_width, full_class: 'container-fluid'
  endcapture
-%}

<div class="newsletter-section section-padding{% unless section.settings.padding == 'default' %}-{{ section.settings.padding }}{% endunless %} color-{{ section.settings.color_scheme }}">
  {% case section.settings.design %}
    {% when 'side-by-side' %}
      {% render 'newsletter-side-by-side',
        title: section.settings.title,
        text: section.settings.text,
        button_text: section.settings.button_text,
        button_style: section.settings.button_style,
        button_color: section.settings.button_color,
        privacy_text: section.settings.privacy_text,
        privacy_link: section.settings.privacy_link,
        privacy_link_text: section.settings.privacy_link_text,
        container_class: container_class
      %}

    {% when 'stacked' %}
      {% render 'newsletter-stacked',
        title: section.settings.title,
        text: section.settings.text,
        button_text: section.settings.button_text,
        button_style: section.settings.button_style,
        button_color: section.settings.button_color,
        privacy_text: section.settings.privacy_text,
        privacy_link: section.settings.privacy_link,
        privacy_link_text: section.settings.privacy_link_text,
        container_class: container_class
      %}

    {% when 'card' %}
      {% render 'newsletter-card',
        title: section.settings.title,
        text: section.settings.text,
        button_text: section.settings.button_text,
        button_style: section.settings.button_style,
        button_color: section.settings.button_color,
        privacy_text: section.settings.privacy_text,
        privacy_link: section.settings.privacy_link,
        privacy_link_text: section.settings.privacy_link_text,
        container_class: container_class
      %}
  {% endcase %}
</div>

{% schema %}
{
  "name": "t:sections.newsletter.name",
  "tag": "section",
  "settings": [
    {
      "type": "select",
      "id": "design",
      "label": "t:shared.settings.design.label",
      "default": "side-by-side",
      "options": [
        {
          "value": "side-by-side",
          "label": "t:sections.newsletter.settings.design.options__0.label"
        },
        {
          "value": "stacked",
          "label": "t:sections.newsletter.settings.design.options__1.label"
        },
        {
          "value": "card",
          "label": "t:sections.newsletter.settings.design.options__2.label"
        }
      ]
    },
    {
      "type": "header",
      "content": "t:shared.headers.content"
    },
    {
      "type": "text",
      "id": "title",
      "label": "t:shared.settings.title.label",
      "default": "t:sections.newsletter.settings.title.default"
    },
    {
      "type": "textarea",
      "id": "text",
      "label": "t:shared.settings.text.label",
      "default": "t:sections.newsletter.settings.text.default",
      "info": "t:shared.info.line_breaks_multiple_lines"
    },
    {
      "type": "text",
      "id": "button_text",
      "label": "t:shared.settings.button_text.label",
      "default": "t:sections.newsletter.settings.button_text.default"
    },
    {
      "type": "select",
      "id": "button_style",
      "label": "t:shared.settings.button_style.label",
      "default": "solid",
      "options": [
        {
          "value": "solid",
          "label": "t:shared.settings.button_style.options__0.label"
        },
        {
          "value": "outline",
          "label": "t:shared.settings.button_style.options__1.label"
        }
      ]
    },
    {
      "type": "select",
      "id": "button_color",
      "label": "t:shared.settings.button_color.label",
      "default": "primary",
      "options": [
        {
          "value": "primary",
          "label": "t:shared.settings.button_color.options__0.label"
        },
        {
          "value": "secondary",
          "label": "t:shared.settings.button_color.options__1.label"
        }
      ]
    },
    {
      "type": "header",
      "content": "t:sections.newsletter.settings.header__privacy_notice.content"
    },
    {
      "type": "text",
      "id": "privacy_text",
      "label": "t:sections.newsletter.settings.privacy_text.label",
      "default": "t:sections.newsletter.settings.privacy_text.default",
      "info": "t:sections.newsletter.settings.privacy_text.info"
    },
    {
      "type": "url",
      "id": "privacy_link",
      "label": "t:sections.newsletter.settings.privacy_link.label"
    },
    {
      "type": "text",
      "id": "privacy_link_text",
      "label": "t:sections.newsletter.settings.privacy_link_text.label",
      "default": "t:sections.newsletter.settings.privacy_link_text.default"
    },
    {
      "type": "header",
      "content": "t:shared.headers.layout"
    },
    {
      "type": "checkbox",
      "id": "full_width",
      "default": false,
      "label": "t:shared.settings.full_width.label"
    },
    {
      "type": "header",
      "content": "t:shared.headers.padding"
    },
    {
      "type": "select",
      "id": "padding",
      "label": "t:shared.settings.padding.label",
      "default": "default",
      "info": "t:shared.settings.padding.info",
      "options": [
        {
          "value": "none",
          "label": "t:shared.settings.padding.options__0.label"
        },
        {
          "value": "small",
          "label": "t:shared.settings.padding.options__1.label"
        },
        {
          "value": "default",
          "label": "t:shared.settings.padding.options__2.label"
        },
        {
          "value": "large",
          "label": "t:shared.settings.padding.options__3.label"
        }
      ]
    },
    {
      "type": "header",
      "content": "t:shared.headers.colors"
    },
    {
      "type": "color_scheme",
      "id": "color_scheme",
      "label": "t:shared.settings.color_scheme.label",
      "default": "scheme-2"
    }
  ],
  "presets": [
    {
      "name": "t:sections.newsletter.presets.newsletter.name",
      "category": "t:shared.categories.forms",
      "settings": {
        "design": "t:sections.newsletter.presets.newsletter.settings.design"
      }
    }
  ],
  "disabled_on": {
    "groups": [
      "header",
      "footer"
    ]
  }
}
{% endschema %}
