{%- comment -%}
  Page Section - Large typography header matching collection template
{%- endcomment -%}

{%- liquid
  capture container_class
    render 'container-class', full_width: section.settings.full_width, full_class: 'container-fluid'
  endcapture

  capture header_align_class
    render 'alignment-classes', alignment: section.settings.header_alignment, output: 'text'
  endcapture

  # Check if page has content - strip whitespace to handle empty HTML
  assign content_length = page.content | strip_html | strip | size
  assign has_content = false
  if content_length > 0
    assign has_content = true
  endif
-%}

<style>
  /* Title line stagger (managed by TweenManager) */
  .page-section .page-title .tween-split-line:nth-child(2) { margin-left: clamp(1.5rem, 10vw, 8rem); }
  .page-section .page-title .tween-split-line:nth-child(3) { margin-left: clamp(3rem, 18vw, 14rem); }
  .page-section .page-title.text-center .tween-split-line:nth-child(2),
  .page-section .page-title.text-center .tween-split-line:nth-child(3) { margin-left: 0; }
  .page-section .page-title.text-right .tween-split-line:nth-child(2),
  .page-section .page-title.text-right .tween-split-line:nth-child(3) { margin-left: 0; margin-right: clamp(1.5rem, 10vw, 8rem); }
  .page-section .page-title.text-right .tween-split-line:nth-child(3) { margin-right: clamp(3rem, 18vw, 14rem); }
</style>

<div class="page-section bg-(--color-background) section-padding{% unless section.settings.padding == 'default' %}-{{ section.settings.padding }}{% endunless %}{% unless has_content %} pb-0!{% endunless %}">
  <header class="section-header-spacing {{ container_class }} {{ header_align_class }}" data-tween-group="page-header" data-tween-start="top bottom">
    <h1 class="page-title {{ header_align_class }}" data-tween data-tween-type="split-text">
      {{ page.title }}
    </h1>
  </header>

  {%- if has_content -%}
    <div class="{{ container_class }}" data-tween data-tween-type="fade-up" data-tween-start="top bottom">
      <div class="prose max-w-none text-(--color-text)">
        {{ page.content }}
      </div>
    </div>
  {%- endif -%}
</div>

{% schema %}
{
  "name": "Page",
  "tag": "section",
  "settings": [
    {
      "type": "header",
      "content": "Layout"
    },
    {
      "type": "checkbox",
      "id": "full_width",
      "default": false,
      "label": "Full width"
    },
    {
      "type": "text_alignment",
      "id": "header_alignment",
      "label": "Header alignment",
      "default": "left"
    },
    {
      "type": "select",
      "id": "padding",
      "label": "Section padding",
      "info": "Default padding is set in global theme settings",
      "default": "default",
      "options": [
        { "value": "default", "label": "Default" },
        { "value": "small", "label": "Small" },
        { "value": "large", "label": "Large" },
        { "value": "none", "label": "None" }
      ]
    }
  ],
  "disabled_on": {
    "groups": ["header", "footer"]
  }
  }
{% endschema %}
