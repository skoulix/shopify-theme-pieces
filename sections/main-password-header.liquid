{%- comment -%}
  Password Header Section - Tailwind version
  Minimal, centered design
{%- endcomment -%}

<div class="color-{{ section.settings.color_scheme }} gradient">
  <header class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6 lg:py-8">
    <div class="flex flex-col lg:grid lg:grid-cols-3 lg:gap-8 items-center text-center lg:text-left">
      {%- comment -%} Logo {%- endcomment -%}
      <div class="mb-4 lg:mb-0">
        {%- if settings.logo != blank -%}
          {%- assign logo_alt = settings.logo.alt | default: shop.name | escape -%}
          {%- assign logo_height = settings.logo_width | divided_by: settings.logo.aspect_ratio -%}
          {{ settings.logo | image_url: width: 500 | image_tag:
            class: 'h-auto',
            style: 'max-width: ' | append: settings.logo_width | append: 'px',
            widths: '50, 100, 150, 200, 250, 300, 400, 500',
            width: settings.logo_width,
            height: logo_height,
            alt: logo_alt
          }}
        {%- else -%}
          <h1 class="text-2xl lg:text-3xl font-semibold text-neutral-900">{{ shop.name }}</h1>
        {%- endif -%}
      </div>

      {%- comment -%} Password Message {%- endcomment -%}
      {%- if shop.password_message != blank -%}
        <div class="text-sm lg:text-base text-neutral-600 my-4 lg:my-0 lg:text-center">
          {{ shop.password_message }}
        </div>
      {%- endif -%}

      {%- comment -%} Password Login Modal {%- endcomment -%}
      <password-modal class="lg:justify-self-end lg:col-start-3">
        <details class="modal group">
          <summary class="list-none cursor-pointer" aria-haspopup="dialog">
            <div class="modal__toggle-open inline-flex items-center gap-2 text-sm text-neutral-600 hover:text-neutral-900 transition-colors">
              {%- render 'icon', name: 'lock', size: '18' -%}
              <span>{{ 'general.password_page.login_password_button' | t }}</span>
            </div>
            <div class="modal__toggle-close hidden group-open:flex fixed top-4 right-4 z-50 p-2 bg-white rounded-full shadow-lg cursor-pointer hover:bg-neutral-100 transition-colors" aria-hidden="true">
              {%- render 'icon', name: 'close', size: '20' -%}
            </div>
          </summary>

          <div
            class="modal__content fixed inset-0 z-40 flex items-center justify-center bg-black/50"
            role="dialog"
            aria-labelledby="DialogHeading"
            aria-modal="true"
          >
            <div class="relative bg-white rounded-2xl p-8 lg:p-12 max-w-lg w-full mx-4 text-center" tabindex="-1">
              <button type="button" class="modal__close-button absolute top-4 right-4 p-2 text-neutral-400 hover:text-neutral-900 transition-colors" aria-label="{{ 'accessibility.close' | t }}">
                {%- render 'icon', name: 'close', size: '20' -%}
              </button>

              <h2 class="text-lg font-medium text-neutral-900 mb-6" id="DialogHeading">
                {{ 'general.password_page.login_form_heading' | t }}
              </h2>

              {%- form 'storefront_password', class: 'space-y-4' -%}
                <div class="relative">
                  <input
                    type="password"
                    name="password"
                    id="Password"
                    class="w-full px-4 py-3 border border-neutral-300 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-neutral-900 focus:border-transparent{% if form.errors %} border-red-500{% endif %}"
                    autocomplete="current-password"
                    {% if form.errors %}
                      aria-invalid="true"
                      aria-describedby="PasswordLoginForm-password-error"
                    {%- endif -%}
                    placeholder="{{ 'general.password_page.login_form_password_placeholder' | t }}"
                  >
                  {%- if form.errors -%}
                    <div id="PasswordLoginForm-password-error" role="status" class="mt-2 flex items-center gap-2 text-red-600 text-sm">
                      <span class="sr-only">{{ 'accessibility.error' | t }}</span>
                      {%- render 'icon', name: 'error', size: '16' -%}
                      <span>{{ 'general.password_page.login_form_error' | t }}</span>
                    </div>
                  {%- endif -%}
                </div>

                <button name="commit" class="w-full sm:w-auto px-8 py-3 border border-neutral-900 text-neutral-900 text-sm font-medium rounded-lg hover:bg-neutral-900 hover:text-white transition-colors">
                  {{ 'general.password_page.login_form_submit' | t }}
                </button>
              {%- endform -%}

              <p class="mt-6 text-xs text-neutral-500">
                {{ 'general.password_page.admin_link_html' | t }}
              </p>
            </div>
          </div>
        </details>
      </password-modal>
    </div>
  </header>
</div>

{% assign scheme1 = settings.color_schemes | first %}
{%- if section.settings.color_scheme == scheme1 -%}
  <hr class="border-neutral-200 m-0">
{%- endif -%}

{% schema %}
{
  "name": "t:sections.main-password-header.name",
  "settings": [
    {
      "type": "paragraph",
      "content": "t:sections.main-password-header.settings.logo_help.content"
    },
    {
      "type": "color_scheme",
      "id": "color_scheme",
      "label": "t:sections.all.colors.label",
      "default": "scheme-1"
    }
  ]
}
{% endschema %}
