{%- comment -%}
  Account Page - Tailwind Version
  Modern, minimal design with order history and account details
{%- endcomment -%}

<div class="py-12 lg:py-16 px-4">
  <div class="max-w-6xl mx-auto">
    {%- comment -%} Header {%- endcomment -%}
    <div class="flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4 mb-8 lg:mb-12">
      <h1 class="text-2xl lg:text-3xl font-semibold text-neutral-900">
        {{ 'customer.account.title' | t }}
      </h1>
      <a
        href="{{ routes.account_logout_url }}"
        class="inline-flex items-center gap-2 text-sm text-neutral-600 hover:text-neutral-900 transition-colors"
      >
        {%- render 'icon', name: 'sign-out', size: '20' -%}
        {{ 'customer.log_out' | t }}
      </a>
    </div>

    <div class="grid grid-cols-1 lg:grid-cols-3 gap-8 lg:gap-12">
      {%- comment -%} Order History {%- endcomment -%}
      <div class="lg:col-span-2">
        <h2 class="text-lg font-medium text-neutral-900 mb-6">
          {{ 'customer.orders.title' | t }}
        </h2>

        {% paginate customer.orders by 20 %}
          {%- if customer.orders.size > 0 -%}
            {%- comment -%} Desktop Table {%- endcomment -%}
            <div class="hidden md:block overflow-hidden rounded-xl border border-neutral-200">
              <table class="w-full">
                <thead>
                  <tr class="bg-neutral-50 border-b border-neutral-200">
                    <th class="px-4 py-3 text-left text-xs font-medium uppercase tracking-wider text-neutral-500">
                      {{ 'customer.orders.order_number' | t }}
                    </th>
                    <th class="px-4 py-3 text-left text-xs font-medium uppercase tracking-wider text-neutral-500">
                      {{ 'customer.orders.date' | t }}
                    </th>
                    <th class="px-4 py-3 text-left text-xs font-medium uppercase tracking-wider text-neutral-500">
                      {{ 'customer.orders.payment_status' | t }}
                    </th>
                    <th class="px-4 py-3 text-left text-xs font-medium uppercase tracking-wider text-neutral-500">
                      {{ 'customer.orders.fulfillment_status' | t }}
                    </th>
                    <th class="px-4 py-3 text-right text-xs font-medium uppercase tracking-wider text-neutral-500">
                      {{ 'customer.orders.total' | t }}
                    </th>
                  </tr>
                </thead>
                <tbody class="divide-y divide-neutral-100">
                  {%- for order in customer.orders -%}
                    <tr class="hover:bg-neutral-50 transition-colors">
                      <td class="px-4 py-4">
                        <a
                          href="{{ order.customer_url }}"
                          class="text-sm font-medium text-neutral-900 hover:underline"
                          aria-label="{{ 'customer.orders.order_number_link' | t: number: order.name }}"
                        >
                          {{ order.name }}
                        </a>
                      </td>
                      <td class="px-4 py-4 text-sm text-neutral-600">
                        {{ order.created_at | time_tag: format: 'date' }}
                      </td>
                      <td class="px-4 py-4">
                        <span class="inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium
                          {%- if order.financial_status == 'paid' %} bg-green-100 text-green-800
                          {%- elsif order.financial_status == 'pending' %} bg-yellow-100 text-yellow-800
                          {%- else %} bg-neutral-100 text-neutral-800{% endif %}">
                          {{ order.financial_status_label }}
                        </span>
                      </td>
                      <td class="px-4 py-4">
                        <span class="inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium
                          {%- if order.fulfillment_status == 'fulfilled' %} bg-green-100 text-green-800
                          {%- elsif order.fulfillment_status == 'partial' %} bg-yellow-100 text-yellow-800
                          {%- else %} bg-neutral-100 text-neutral-800{% endif %}">
                          {{ order.fulfillment_status_label }}
                        </span>
                      </td>
                      <td class="px-4 py-4 text-sm font-medium text-neutral-900 text-right">
                        {{ order.total_net_amount | money_with_currency }}
                      </td>
                    </tr>
                  {%- endfor -%}
                </tbody>
              </table>
            </div>

            {%- comment -%} Mobile Cards {%- endcomment -%}
            <div class="md:hidden space-y-4">
              {%- for order in customer.orders -%}
                <a
                  href="{{ order.customer_url }}"
                  class="block p-4 bg-white border border-neutral-200 rounded-xl hover:border-neutral-300 transition-colors"
                >
                  <div class="flex items-center justify-between mb-3">
                    <span class="text-sm font-medium text-neutral-900">{{ order.name }}</span>
                    <span class="text-sm font-medium text-neutral-900">{{ order.total_net_amount | money_with_currency }}</span>
                  </div>
                  <div class="flex items-center justify-between text-xs text-neutral-500">
                    <span>{{ order.created_at | time_tag: format: 'date' }}</span>
                    <div class="flex items-center gap-2">
                      <span class="inline-flex items-center px-2 py-0.5 rounded-full text-xs font-medium
                        {%- if order.financial_status == 'paid' %} bg-green-100 text-green-800
                        {%- elsif order.financial_status == 'pending' %} bg-yellow-100 text-yellow-800
                        {%- else %} bg-neutral-100 text-neutral-800{% endif %}">
                        {{ order.financial_status_label }}
                      </span>
                    </div>
                  </div>
                </a>
              {%- endfor -%}
            </div>

            {%- comment -%} Pagination {%- endcomment -%}
            {%- if paginate.pages > 1 -%}
              <nav class="mt-8 flex items-center justify-center gap-2" role="navigation" aria-label="{{ 'general.pagination.label' | t }}">
                {%- if paginate.previous -%}
                  <a
                    href="{{ paginate.previous.url }}"
                    class="p-2 text-neutral-600 hover:text-neutral-900 hover:bg-neutral-100 rounded-lg transition-colors"
                    aria-label="{{ 'general.pagination.previous' | t }}"
                  >
                    {%- render 'icon', name: 'caret-left', size: '20' -%}
                  </a>
                {%- endif -%}

                {%- for part in paginate.parts -%}
                  {%- if part.is_link -%}
                    <a
                      href="{{ part.url }}"
                      class="px-3 py-1.5 text-sm text-neutral-600 hover:text-neutral-900 hover:bg-neutral-100 rounded-lg transition-colors"
                      aria-label="{{ 'general.pagination.page' | t: number: part.title }}"
                    >
                      {{ part.title }}
                    </a>
                  {%- else -%}
                    {%- if part.title == paginate.current_page -%}
                      <span
                        class="px-3 py-1.5 text-sm font-medium text-white bg-neutral-900 rounded-lg"
                        aria-current="page"
                      >
                        {{ part.title }}
                      </span>
                    {%- else -%}
                      <span class="px-3 py-1.5 text-sm text-neutral-400">{{ part.title }}</span>
                    {%- endif -%}
                  {%- endif -%}
                {%- endfor -%}

                {%- if paginate.next -%}
                  <a
                    href="{{ paginate.next.url }}"
                    class="p-2 text-neutral-600 hover:text-neutral-900 hover:bg-neutral-100 rounded-lg transition-colors"
                    aria-label="{{ 'general.pagination.next' | t }}"
                  >
                    {%- render 'icon', name: 'caret-right', size: '20' -%}
                  </a>
                {%- endif -%}
              </nav>
            {%- endif -%}
          {%- else -%}
            <div class="text-center py-12 bg-neutral-50 rounded-xl">
              <div class="w-16 h-16 mx-auto mb-4 text-neutral-300">
                {%- render 'icon', name: 'package', size: '64' -%}
              </div>
              <p class="text-neutral-600">{{ 'customer.orders.none' | t }}</p>
              <a
                href="{{ routes.all_products_collection_url }}"
                class="inline-flex items-center gap-2 mt-4 px-6 py-3 bg-neutral-900 text-white text-sm font-medium rounded-lg hover:bg-neutral-800 transition-colors"
              >
                {{ 'general.continue_shopping' | t }}
                {%- render 'icon', name: 'arrow-right', size: '16' -%}
              </a>
            </div>
          {%- endif -%}
        {% endpaginate %}
      </div>

      {%- comment -%} Account Details {%- endcomment -%}
      <div>
        <h2 class="text-lg font-medium text-neutral-900 mb-6">
          {{ 'customer.account.details' | t }}
        </h2>

        <div class="p-6 bg-neutral-50 rounded-xl">
          {%- if customer.default_address -%}
            <div class="text-sm text-neutral-600 space-y-1">
              {{ customer.default_address | format_address }}
            </div>
          {%- else -%}
            <p class="text-sm text-neutral-500">{{ 'customer.addresses.no_default' | t | default: 'No default address set.' }}</p>
          {%- endif -%}

          <a
            href="{{ routes.account_addresses_url }}"
            class="inline-flex items-center gap-2 mt-4 text-sm text-neutral-900 font-medium hover:underline"
          >
            {{ 'customer.account.view_addresses' | t }} ({{ customer.addresses_count }})
            {%- render 'icon', name: 'arrow-right', size: '16' -%}
          </a>
        </div>
      </div>
    </div>
  </div>
</div>

{% schema %}
{
  "name": "t:sections.main-account.name",
  "settings": []
}
{% endschema %}
