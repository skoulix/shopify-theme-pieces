
{%- comment -%}
  Team Section - Creative team grid with hover reveals
{%- endcomment -%}

{%- liquid
  capture container_class
    render 'container-class', full_width: section.settings.full_width, full_class: 'container-fluid'
  endcapture

  capture header_container_class
    render 'container-class', full_width: section.settings.full_width, full_class: 'container-fluid'
  endcapture
-%}

<div
  class="team-section-wrapper section-padding{% unless section.settings.padding == 'default' %}-{{ section.settings.padding }}{% endunless %} color-{{ section.settings.color_scheme }}"
  data-team-section="{{ section.id }}"
  style="--team-columns: {{ section.settings.columns }}"
>
  {%- comment -%} Header - always contained {%- endcomment -%}
  {% if section.settings.label != blank or section.settings.title != blank %}
    <div class="{{ header_container_class }}">
      <div class="team-header">
        {% render 'section-header',
          label: section.settings.label,
          title: section.settings.title,
          description: section.settings.text,
          alignment: section.settings.header_alignment,
          group_id: 'team-header-' | append: section.id
        %}
      </div>
    </div>
  {% endif %}

  <div class="{{ container_class }}">
    {%- comment -%} Team Grid {%- endcomment -%}
    <div class="team-grid lg:grid-cols-[repeat(var(--team-columns),1fr)]">
      {% for block in section.blocks %}
        <div class="team-member" data-tween data-tween-type="fade-up" {{ block.shopify_attributes }}>
          <div class="team-member-image">
            {% if block.settings.image != blank %}
              {{ block.settings.image | image_url: width: 800 | image_tag:
                loading: 'lazy',
                decoding: 'async',
                sizes: '(max-width: 768px) 50vw, (max-width: 1024px) 33vw, 25vw',
                widths: '300, 400, 500, 600, 800',
                alt: block.settings.image.alt | default: block.settings.name | default: section.settings.title
              }}
            {% else %}
              <div class="team-member-placeholder">
                <div class="team-member-avatar">
                  <i class="ph ph-user"></i>
                </div>
              </div>
            {% endif %}
          </div>

          <div class="team-member-overlay"></div>

          <div class="team-member-content">
            {% if block.settings.name != blank %}
              <h3 class="team-member-name font-heading">
                {{ block.settings.name }}
              </h3>
            {% endif %}

            {% if block.settings.role != blank %}
              <p class="team-member-role text-label-sm">
                {{ block.settings.role }}
              </p>
            {% endif %}

            {% if block.settings.bio != blank %}
              <div class="team-member-bio-wrapper">
                <p class="team-member-bio">
                  {{ block.settings.bio }}
                </p>
              </div>
            {% endif %}

            {% if block.settings.linkedin != blank or block.settings.twitter != blank or block.settings.instagram != blank %}
              <div class="team-member-social">
                {% if block.settings.linkedin != blank %}
                  <a href="{{ block.settings.linkedin }}" class="team-member-social-link" target="_blank" rel="noopener" aria-label="{{ 'social.linkedin' | t }}">
                    <i class="ph ph-linkedin-logo"></i>
                  </a>
                {% endif %}
                {% if block.settings.twitter != blank %}
                  <a href="{{ block.settings.twitter }}" class="team-member-social-link" target="_blank" rel="noopener" aria-label="{{ 'social.twitter' | t }}">
                    <i class="ph ph-x-logo"></i>
                  </a>
                {% endif %}
                {% if block.settings.instagram != blank %}
                  <a href="{{ block.settings.instagram }}" class="team-member-social-link" target="_blank" rel="noopener" aria-label="{{ 'social.instagram' | t }}">
                    <i class="ph ph-instagram-logo"></i>
                  </a>
                {% endif %}
              </div>
            {% endif %}
          </div>
        </div>
      {% endfor %}
    </div>
  </div>
</div>

{% schema %}
{
  "name": "t:sections.team.name",
  "tag": "section",
  "class": "team-section",
  "settings": [
    {
      "type": "header",
      "content": "t:shared.headers.content"
    },
    {
      "type": "text",
      "id": "label",
      "default": "t:sections.team.settings.label.default",
      "label": "t:shared.settings.label.label"
    },
    {
      "type": "text",
      "id": "title",
      "default": "t:sections.team.settings.title.default",
      "label": "t:shared.settings.title.label"
    },
    {
      "type": "textarea",
      "id": "text",
      "default": "t:sections.team.settings.text.default",
      "label": "t:shared.settings.text.label"
    },
    {
      "type": "header",
      "content": "t:shared.headers.layout"
    },
    {
      "type": "checkbox",
      "id": "full_width",
      "default": false,
      "label": "t:shared.settings.full_width.label"
    },
    {
      "type": "text_alignment",
      "id": "header_alignment",
      "label": "t:shared.settings.header_alignment.label",
      "default": "left"
    },
    {
      "type": "range",
      "id": "columns",
      "min": 2,
      "max": 5,
      "step": 1,
      "default": 4,
      "label": "t:shared.settings.columns.label"
    },
    {
      "type": "select",
      "id": "padding",
      "label": "t:shared.settings.padding.label",
      "info": "t:shared.settings.padding.info",
      "default": "default",
      "options": [
        {
          "value": "default",
          "label": "t:shared.settings.padding.options__2.label"
        },
        {
          "value": "small",
          "label": "t:shared.settings.padding.options__1.label"
        },
        {
          "value": "large",
          "label": "t:shared.settings.padding.options__3.label"
        },
        {
          "value": "none",
          "label": "t:shared.settings.padding.options__0.label"
        }
      ]
    },
    {
      "type": "header",
      "content": "t:shared.headers.colors"
    },
    {
      "type": "color_scheme",
      "id": "color_scheme",
      "label": "t:shared.settings.color_scheme.label",
      "default": "scheme-2"
    }
  ],
  "blocks": [
    {
      "type": "member",
      "name": "t:sections.team.blocks.member.name",
      "settings": [
        {
          "type": "image_picker",
          "id": "image",
          "label": "t:shared.settings.image.label"
        },
        {
          "type": "text",
          "id": "name",
          "default": "t:sections.team.blocks.member.settings.name.default",
          "label": "t:sections.team.blocks.member.settings.name.label"
        },
        {
          "type": "text",
          "id": "role",
          "default": "t:sections.team.blocks.member.settings.role.default",
          "label": "t:sections.team.blocks.member.settings.role.label"
        },
        {
          "type": "textarea",
          "id": "bio",
          "default": "t:sections.team.blocks.member.settings.bio.default",
          "label": "t:sections.team.blocks.member.settings.bio.label"
        },
        {
          "type": "header",
          "content": "t:shared.headers.social_links"
        },
        {
          "type": "url",
          "id": "linkedin",
          "label": "t:sections.team.blocks.member.settings.linkedin.label"
        },
        {
          "type": "url",
          "id": "twitter",
          "label": "t:sections.team.blocks.member.settings.twitter.label"
        },
        {
          "type": "url",
          "id": "instagram",
          "label": "t:sections.team.blocks.member.settings.instagram.label"
        }
      ]
    }
  ],
  "presets": [
    {
      "name": "t:sections.team.presets.team.name",
      "category": "t:sections.team.presets.team.category",
      "blocks": [
        {
          "type": "member",
          "settings": {
            "name": "t:sections.team.presets.team.blocks.member.0.name",
            "role": "t:sections.team.presets.team.blocks.member.0.role",
            "bio": "t:sections.team.presets.team.blocks.member.0.bio"
          }
        },
        {
          "type": "member",
          "settings": {
            "name": "t:sections.team.presets.team.blocks.member.1.name",
            "role": "t:sections.team.presets.team.blocks.member.1.role",
            "bio": "t:sections.team.presets.team.blocks.member.1.bio"
          }
        },
        {
          "type": "member",
          "settings": {
            "name": "t:sections.team.presets.team.blocks.member.2.name",
            "role": "t:sections.team.presets.team.blocks.member.2.role",
            "bio": "t:sections.team.presets.team.blocks.member.2.bio"
          }
        },
        {
          "type": "member",
          "settings": {
            "name": "t:sections.team.presets.team.blocks.member.3.name",
            "role": "t:sections.team.presets.team.blocks.member.3.role",
            "bio": "t:sections.team.presets.team.blocks.member.3.bio"
          }
        }
      ]
    }
  ],
  "disabled_on": {
    "groups": [
      "header",
      "footer"
    ]
  }
}
{% endschema %}
