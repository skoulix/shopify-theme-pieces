{%- comment -%}
  Team Section - Creative team grid with hover reveals
{%- endcomment -%}

{%- liquid
  if section.settings.full_width
    assign container_class = 'page-full'
  else
    assign container_class = 'page-container'
  endif
-%}

<section
  class="team-section-wrapper section-padding color-{{ section.settings.color_scheme }}"
  data-team-section="{{ section.id }}"
  style="--team-columns: {{ section.settings.columns }}"
>
  <div class="{{ container_class }}">
    {%- comment -%} Header - uses global data-tween system for animations {%- endcomment -%}
    {% if section.settings.label != blank or section.settings.title != blank %}
      <div class="team-header text-{{ section.settings.header_alignment }}" data-tween-group="team-header-{{ section.id }}">
        {% if section.settings.label != blank %}
          <span class="section-label" data-tween data-tween-type="fade-up">
            {{ section.settings.label }}
          </span>
        {% endif %}

        {% if section.settings.title != blank %}
          <h2 class="section-title" data-tween data-tween-type="split-text">
            {{ section.settings.title }}
          </h2>
        {% endif %}

        {% if section.settings.description != blank %}
          <p class="section-description{% if section.settings.header_alignment == 'center' %} mx-auto{% elsif section.settings.header_alignment == 'right' %} ml-auto{% endif %}" data-tween data-tween-type="fade-up">
            {{ section.settings.description }}
          </p>
        {% endif %}
      </div>
    {% endif %}

    {%- comment -%} Team Grid {%- endcomment -%}
    <div class="team-grid lg:grid-cols-[repeat(var(--team-columns),1fr)]">
      {% for block in section.blocks %}
        <div class="team-member" data-tween data-tween-type="fade-up" {{ block.shopify_attributes }}>
          <div class="team-member-image">
            {% if block.settings.image != blank %}
              {{ block.settings.image | image_url: width: 800 | image_tag:
                loading: 'lazy',
                decoding: 'async',
                sizes: '(max-width: 768px) 50vw, (max-width: 1024px) 33vw, 25vw',
                widths: '300, 400, 500, 600, 800',
                alt: block.settings.image.alt | default: block.settings.name | default: section.settings.title
              }}
            {% else %}
              <div class="team-member-placeholder">
                <div class="team-member-avatar">
                  <i class="ph ph-user"></i>
                </div>
              </div>
            {% endif %}
          </div>

          <div class="team-member-overlay"></div>

          <div class="team-member-content">
            {% if block.settings.name != blank %}
              <h3 class="team-member-name font-heading">
                {{ block.settings.name }}
              </h3>
            {% endif %}

            {% if block.settings.role != blank %}
              <p class="team-member-role text-label-sm">
                {{ block.settings.role }}
              </p>
            {% endif %}

            {% if block.settings.bio != blank %}
              <div class="team-member-bio-wrapper">
                <p class="team-member-bio">
                  {{ block.settings.bio }}
                </p>
              </div>
            {% endif %}

            {% if block.settings.linkedin != blank or block.settings.twitter != blank or block.settings.instagram != blank %}
              <div class="team-member-social">
                {% if block.settings.linkedin != blank %}
                  <a href="{{ block.settings.linkedin }}" class="team-member-social-link" target="_blank" rel="noopener" aria-label="{{ 'social.linkedin' | t }}">
                    <i class="ph ph-linkedin-logo"></i>
                  </a>
                {% endif %}
                {% if block.settings.twitter != blank %}
                  <a href="{{ block.settings.twitter }}" class="team-member-social-link" target="_blank" rel="noopener" aria-label="{{ 'social.twitter' | t }}">
                    <i class="ph ph-x-logo"></i>
                  </a>
                {% endif %}
                {% if block.settings.instagram != blank %}
                  <a href="{{ block.settings.instagram }}" class="team-member-social-link" target="_blank" rel="noopener" aria-label="{{ 'social.instagram' | t }}">
                    <i class="ph ph-instagram-logo"></i>
                  </a>
                {% endif %}
              </div>
            {% endif %}
          </div>
        </div>
      {% endfor %}
    </div>
  </div>
</section>

{% schema %}
{
  "name": "Team",
  "tag": "section",
  "class": "team-section",
  "settings": [
    {
      "type": "header",
      "content": "Header"
    },
    {
      "type": "text",
      "id": "label",
      "default": "Our Team",
      "label": "Label"
    },
    {
      "type": "text",
      "id": "title",
      "default": "Meet the People Behind the Brand",
      "label": "Title"
    },
    {
      "type": "textarea",
      "id": "description",
      "default": "We're a passionate team dedicated to creating products you'll love.",
      "label": "Description"
    },
    {
      "type": "text_alignment",
      "id": "header_alignment",
      "default": "left",
      "label": "Header alignment"
    },
    {
      "type": "header",
      "content": "Grid"
    },
    {
      "type": "range",
      "id": "columns",
      "min": 2,
      "max": 5,
      "step": 1,
      "default": 4,
      "label": "Columns (desktop)"
    },
    {
      "type": "header",
      "content": "Layout"
    },
    {
      "type": "checkbox",
      "id": "full_width",
      "default": false,
      "label": "Full width"
    },
    {
      "type": "header",
      "content": "Colors"
    },
    {
      "type": "color_scheme",
      "id": "color_scheme",
      "label": "Color scheme",
      "default": "scheme-2"
    }
  ],
  "blocks": [
    {
      "type": "member",
      "name": "Team Member",
      "settings": [
        {
          "type": "image_picker",
          "id": "image",
          "label": "Photo"
        },
        {
          "type": "text",
          "id": "name",
          "default": "Team Member",
          "label": "Name"
        },
        {
          "type": "text",
          "id": "role",
          "default": "Position",
          "label": "Role"
        },
        {
          "type": "textarea",
          "id": "bio",
          "default": "A short bio about this team member.",
          "label": "Bio"
        },
        {
          "type": "header",
          "content": "Social Links"
        },
        {
          "type": "url",
          "id": "linkedin",
          "label": "LinkedIn URL"
        },
        {
          "type": "url",
          "id": "twitter",
          "label": "Twitter/X URL"
        },
        {
          "type": "url",
          "id": "instagram",
          "label": "Instagram URL"
        }
      ]
    }
  ],
  "presets": [
    {
      "name": "Team",
      "category": "Text & content",
      "blocks": [
        { "type": "member", "settings": { "name": "Alex Thompson", "role": "Founder & CEO", "bio": "Passionate about creating exceptional products." } },
        { "type": "member", "settings": { "name": "Sarah Chen", "role": "Creative Director", "bio": "Bringing creative visions to life." } },
        { "type": "member", "settings": { "name": "Michael Brown", "role": "Head of Product", "bio": "Obsessed with user experience." } },
        { "type": "member", "settings": { "name": "Emily Davis", "role": "Customer Success", "bio": "Making sure customers are happy." } }
      ]
    }
  ]
}
{% endschema %}
