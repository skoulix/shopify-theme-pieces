{%- liquid
  if section.settings.full_width
    if section.settings.layout == 'image_left'
      assign container_class = 'lg:pr-(--page-padding)'
    else
      assign container_class = 'lg:pl-(--page-padding)'
    endif
    assign content_class = 'px-(--page-padding) lg:px-0'
  else
    assign container_class = 'page-container'
    assign content_class = ''
  endif
-%}

<style>
  @media (min-width: 1024px) { [data-iwt-section="{{ section.id }}"][data-layout="image_right"] .iwt-container { direction: rtl; } [data-iwt-section="{{ section.id }}"][data-layout="image_right"] .iwt-container > * { direction: ltr; } }
  .iwt-container { gap: clamp(2rem, 5vw, 4rem); }
  .iwt-image { aspect-ratio: {{ section.settings.image_ratio }}; }
  [data-iwt-section="{{ section.id }}"] .iwt-stats { gap: clamp(2rem, 4vw, 4rem); border-top-color: var(--color-border); }
  [data-iwt-section="{{ section.id }}"] .iwt-stat-number { font-size: clamp(2rem, 5vw, 3.5rem); letter-spacing: calc(-0.03em + var(--heading-letter-spacing, 0em)); }
</style>

<div
  class="iwt-section overflow-hidden color-{{ section.settings.color_scheme }} section-padding{% unless section.settings.padding == 'default' %}-{{ section.settings.padding }}{% endunless %}"
  data-iwt-section="{{ section.id }}"
  data-layout="{{ section.settings.layout }}"
>
  <div class="iwt-container grid grid-cols-1 lg:grid-cols-2 items-center {{ container_class }}">
    <div class="relative overflow-hidden" data-tween data-tween-type="clip-right">
      <div class="iwt-image overflow-hidden">
        {% if section.settings.image != blank %}
          {{ section.settings.image | image_url: width: 1600 | image_tag:
            class: 'w-full h-full object-cover',
            loading: 'lazy',
          decoding: 'async',
            sizes: '(max-width: 1024px) 100vw, 50vw',
            widths: '600, 800, 1000, 1200, 1600',
            alt: section.settings.image.alt | default: section.settings.title
          }}
        {% else %}
          {{ 'lifestyle-2' | placeholder_svg_tag: 'w-full h-full object-cover' }}
        {% endif %}
      </div>
    </div>

    <div class="max-w-2xl lg:mx-auto {{ content_class }}" data-tween-group="iwt-content-{{ section.id }}">
      {% if section.settings.label != blank %}
        <span class="section-label" data-tween data-tween-type="fade-up">{{ section.settings.label }}</span>
      {% endif %}

      {% if section.settings.title != blank %}
        <h2 class="section-title" data-tween data-tween-type="split-text">
          {{ section.settings.title }}
        </h2>
      {% endif %}

      {% if section.settings.text != blank %}
        <div class="section-description" data-tween data-tween-type="fade-up">
          {{ section.settings.text }}
        </div>
      {% endif %}

      {% if section.settings.button_text != blank and section.settings.button_link != blank %}
        {% if section.settings.button_type == 'link' %}
          <a href="{{ section.settings.button_link }}" class="link-cta section-cta uppercase" data-tween data-tween-type="fade-up">
            <span class="link-cta-text"><span data-hover="{{ section.settings.button_text }}">{{ section.settings.button_text }}</span></span>
            <i class="ph ph-arrow-right"></i>
          </a>
        {% else %}
          {% render 'button',
            text: section.settings.button_text,
            url: section.settings.button_link,
            style: section.settings.button_style,
            color: section.settings.button_color,
            size: section.settings.button_size,
            show_arrow: true,
            class: 'section-cta',
            animate: true
          %}
        {% endif %}
      {% endif %}

      {% if section.blocks.size > 0 %}
        <div class="iwt-stats flex mt-12 pt-8 border-t" data-tween data-tween-type="fade-up">
          {% for block in section.blocks %}
            {% if block.type == 'stat' %}
              <div class="iwt-stat overflow-hidden" {{ block.shopify_attributes }}>
                <div class="iwt-stat-number font-bold leading-none overflow-hidden">
                  <span class="inline-block">{{ block.settings.number }}</span>
                </div>
                <div class="iwt-stat-label mt-2 text-[0.8125rem]{% if settings.headings_uppercase %} uppercase{% endif %} tracking-widest opacity-60">{{ block.settings.label }}</div>
              </div>
            {% endif %}
          {% endfor %}
        </div>
      {% endif %}
    </div>
  </div>
</div>

{%- comment -%} Animations handled by global TweenManager via data-tween attributes {%- endcomment -%}

{% schema %}
{
  "name": "t:sections.image_with_text.name",
  "tag": "section",
  "class": "iwt-section-wrapper",
  "settings": [
    {
      "type": "header",
      "content": "t:shared.headers.image"
    },
    {
      "type": "image_picker",
      "id": "image",
      "label": "t:shared.settings.image.label"
    },
    {
      "type": "select",
      "id": "image_ratio",
      "options": [
        {
          "value": "1/1",
          "label": "t:sections.image_with_text.settings.image_ratio.options__0.label"
        },
        {
          "value": "4/5",
          "label": "t:sections.image_with_text.settings.image_ratio.options__1.label"
        },
        {
          "value": "3/4",
          "label": "t:sections.image_with_text.settings.image_ratio.options__2.label"
        },
        {
          "value": "16/9",
          "label": "t:sections.image_with_text.settings.image_ratio.options__3.label"
        }
      ],
      "default": "4/5",
      "label": "t:sections.image_with_text.settings.image_ratio.label"
    },
    {
      "type": "header",
      "content": "t:shared.headers.content"
    },
    {
      "type": "text",
      "id": "label",
      "default": "t:sections.image_with_text.settings.label.default",
      "label": "t:sections.image_with_text.settings.label.label"
    },
    {
      "type": "text",
      "id": "title",
      "default": "t:sections.image_with_text.settings.title.default",
      "label": "t:shared.settings.title.label"
    },
    {
      "type": "richtext",
      "id": "text",
      "default": "t:sections.image_with_text.settings.text.default",
      "label": "t:sections.image_with_text.settings.text.label"
    },
    {
      "type": "text",
      "id": "button_text",
      "default": "t:sections.image_with_text.settings.button_text.default",
      "label": "t:shared.settings.button_text.label"
    },
    {
      "type": "url",
      "id": "button_link",
      "label": "t:shared.settings.button_link.label"
    },
    {
      "type": "select",
      "id": "button_type",
      "label": "t:sections.image_with_text.settings.button_type.label",
      "default": "link",
      "options": [
        {
          "value": "link",
          "label": "t:sections.image_with_text.settings.button_type.options__0.label"
        },
        {
          "value": "button",
          "label": "t:sections.image_with_text.settings.button_type.options__1.label"
        }
      ]
    },
    {
      "type": "select",
      "id": "button_style",
      "label": "t:shared.settings.button_style.label",
      "default": "solid",
      "options": [
        {
          "value": "solid",
          "label": "t:shared.settings.button_style.options__0.label"
        },
        {
          "value": "outline",
          "label": "t:shared.settings.button_style.options__1.label"
        }
      ],
      "info": "t:sections.image_with_text.settings.button_style.info"
    },
    {
      "type": "select",
      "id": "button_color",
      "label": "t:shared.settings.button_color.label",
      "default": "primary",
      "options": [
        {
          "value": "primary",
          "label": "t:shared.settings.button_color.options__0.label"
        },
        {
          "value": "secondary",
          "label": "t:shared.settings.button_color.options__1.label"
        }
      ]
    },
    {
      "type": "select",
      "id": "button_size",
      "label": "t:shared.settings.button_size.label",
      "default": "default",
      "options": [
        {
          "value": "small",
          "label": "t:shared.settings.button_size.options__0.label"
        },
        {
          "value": "default",
          "label": "t:shared.settings.button_size.options__1.label"
        },
        {
          "value": "large",
          "label": "t:shared.settings.button_size.options__2.label"
        }
      ]
    },
    {
      "type": "header",
      "content": "t:shared.headers.layout"
    },
    {
      "type": "select",
      "id": "layout",
      "options": [
        {
          "value": "image_left",
          "label": "t:sections.image_with_text.settings.layout.options__0.label"
        },
        {
          "value": "image_right",
          "label": "t:sections.image_with_text.settings.layout.options__1.label"
        }
      ],
      "default": "image_left",
      "label": "t:sections.image_with_text.settings.layout.label"
    },
    {
      "type": "checkbox",
      "id": "full_width",
      "default": false,
      "label": "t:shared.settings.full_width.label"
    },
    {
      "type": "select",
      "id": "padding",
      "label": "t:shared.settings.padding.label",
      "info": "t:shared.settings.padding.info",
      "default": "default",
      "options": [
        {
          "value": "default",
          "label": "t:shared.settings.padding.options__2.label"
        },
        {
          "value": "small",
          "label": "t:shared.settings.padding.options__1.label"
        },
        {
          "value": "large",
          "label": "t:shared.settings.padding.options__3.label"
        },
        {
          "value": "none",
          "label": "t:shared.settings.padding.options__0.label"
        }
      ]
    },
    {
      "type": "header",
      "content": "t:shared.headers.colors"
    },
    {
      "type": "color_scheme",
      "id": "color_scheme",
      "label": "t:shared.settings.color_scheme.label",
      "default": "scheme-2"
    }
  ],
  "blocks": [
    {
      "type": "stat",
      "name": "t:sections.image_with_text.blocks.stat.name",
      "settings": [
        {
          "type": "text",
          "id": "number",
          "default": "t:sections.image_with_text.blocks.stat.settings.number.default",
          "label": "t:sections.image_with_text.blocks.stat.settings.number.label"
        },
        {
          "type": "text",
          "id": "label",
          "default": "t:sections.image_with_text.blocks.stat.settings.label.default",
          "label": "t:sections.image_with_text.blocks.stat.settings.label.label"
        }
      ]
    }
  ],
  "presets": [
    {
      "name": "t:sections.image_with_text.presets.image_with_text.name",
      "category": "t:sections.image_with_text.presets.image_with_text.category",
      "blocks": [
        {
          "type": "stat",
          "settings": {
            "number": "t:sections.image_with_text.presets.image_with_text.blocks.stat.0.number",
            "label": "t:sections.image_with_text.presets.image_with_text.blocks.stat.0.label"
          }
        },
        {
          "type": "stat",
          "settings": {
            "number": "t:sections.image_with_text.presets.image_with_text.blocks.stat.1.number",
            "label": "t:sections.image_with_text.presets.image_with_text.blocks.stat.1.label"
          }
        }
      ]
    }
  ],
  "disabled_on": {
    "groups": [
      "header",
      "footer"
    ]
  }
}
{% endschema %}
