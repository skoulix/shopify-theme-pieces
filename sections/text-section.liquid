
{%- comment -%}
  Text Section - Simple text content with optional buttons
{%- endcomment -%}

{%- liquid
  capture container_class
    render 'container-class', full_width: section.settings.full_width, full_class: 'container-fluid'
  endcapture

  # Alignment CSS custom properties
  if section.settings.content_alignment == 'center'
    assign ml = 'auto'
    assign mr = 'auto'
    assign justify = 'center'
  elsif section.settings.content_alignment == 'right'
    assign ml = 'auto'
    assign mr = '0'
    assign justify = 'flex-end'
  else
    assign ml = '0'
    assign mr = '0'
    assign justify = 'flex-start'
  endif
-%}

<div
  class="text-section section-padding{% unless section.settings.padding == 'default' %}-{{ section.settings.padding }}{% endunless %} color-{{ section.settings.color_scheme }}"
  style="--text-section-align: {{ section.settings.content_alignment }}; --text-section-max-width: {{ section.settings.content_width }}rem; --text-section-ml: {{ ml }}; --text-section-mr: {{ mr }}; --text-section-desc-ml: {{ ml }}; --text-section-desc-mr: {{ mr }}; --text-section-justify: {{ justify }};"
  data-text-section="{{ section.id }}"
>
  <div class="{{ container_class }}">
    <div class="text-section-content" data-tween-group="text-section-{{ section.id }}">
      {% if section.settings.label != blank %}
        <span class="section-label" data-tween data-tween-type="fade-up">
          {{ section.settings.label }}
        </span>
      {% endif %}

      {% if section.settings.title != blank %}
        <h2 class="section-title" data-tween data-tween-type="split-text">
          {{ section.settings.title }}
        </h2>
      {% endif %}

      {% if section.settings.text != blank %}
        <p class="section-description" data-tween data-tween-type="fade-up">
          {{ section.settings.text }}
        </p>
      {% endif %}

      {% if section.blocks.size > 0 %}
        <div class="text-section-buttons" data-tween data-tween-type="fade-up">
          {% for block in section.blocks %}
            {% if block.type == 'button' and block.settings.button_text != blank %}
              {%- liquid
                assign icon_name = nil
                if block.settings.button_icon != 'none'
                  assign icon_name = block.settings.button_icon
                endif
              -%}
              {% render 'button',
                text: block.settings.button_text,
                url: block.settings.button_link,
                style: block.settings.button_style,
                color: block.settings.button_color,
                size: block.settings.button_size,
                icon: icon_name,
                icon_position: block.settings.icon_position,
                shopify_attributes: block.shopify_attributes
              %}
            {% endif %}
          {% endfor %}
        </div>
      {% endif %}
    </div>
  </div>
</div>

{% schema %}
{
  "name": "t:sections.text_section.name",
  "tag": "section",
  "class": "text-section",
  "settings": [
    {
      "type": "header",
      "content": "t:shared.headers.content"
    },
    {
      "type": "text",
      "id": "label",
      "label": "t:shared.settings.label.label"
    },
    {
      "type": "text",
      "id": "title",
      "label": "t:shared.settings.title.label",
      "default": "t:sections.text_section.settings.title.default"
    },
    {
      "type": "textarea",
      "id": "text",
      "label": "t:shared.settings.text.label",
      "default": "t:sections.text_section.settings.text.default"
    },
    {
      "type": "header",
      "content": "t:shared.headers.layout"
    },
    {
      "type": "checkbox",
      "id": "full_width",
      "default": false,
      "label": "t:shared.settings.full_width.label"
    },
    {
      "type": "text_alignment",
      "id": "content_alignment",
      "default": "center",
      "label": "t:shared.settings.content_alignment.label"
    },
    {
      "type": "range",
      "id": "content_width",
      "label": "t:sections.text_section.settings.content_width.label",
      "default": 42,
      "min": 20,
      "max": 80,
      "step": 2,
      "unit": "rem"
    },
    {
      "type": "select",
      "id": "padding",
      "label": "t:shared.settings.padding.label",
      "info": "t:shared.settings.padding.info",
      "default": "default",
      "options": [
        {
          "value": "default",
          "label": "t:shared.settings.padding.options__2.label"
        },
        {
          "value": "small",
          "label": "t:shared.settings.padding.options__1.label"
        },
        {
          "value": "large",
          "label": "t:shared.settings.padding.options__3.label"
        },
        {
          "value": "none",
          "label": "t:shared.settings.padding.options__0.label"
        }
      ]
    },
    {
      "type": "header",
      "content": "t:shared.headers.colors"
    },
    {
      "type": "color_scheme",
      "id": "color_scheme",
      "label": "t:shared.settings.color_scheme.label",
      "default": "scheme-1"
    }
  ],
  "blocks": [
    {
      "type": "button",
      "name": "t:shared.blocks.button",
      "settings": [
        {
          "type": "text",
          "id": "button_text",
          "label": "t:shared.settings.button_text.label",
          "default": "t:sections.text_section.blocks.button.settings.button_text.default"
        },
        {
          "type": "url",
          "id": "button_link",
          "label": "t:shared.settings.button_link.label"
        },
        {
          "type": "select",
          "id": "button_style",
          "label": "t:shared.settings.button_style.label",
          "default": "outline",
          "options": [
            {
              "value": "solid",
              "label": "t:shared.settings.button_style.options__0.label"
            },
            {
              "value": "outline",
              "label": "t:shared.settings.button_style.options__1.label"
            }
          ]
        },
        {
          "type": "select",
          "id": "button_color",
          "label": "t:shared.settings.button_color.label",
          "default": "primary",
          "options": [
            {
              "value": "primary",
              "label": "t:shared.settings.button_color.options__0.label"
            },
            {
              "value": "secondary",
              "label": "t:shared.settings.button_color.options__1.label"
            }
          ]
        },
        {
          "type": "select",
          "id": "button_size",
          "label": "t:shared.settings.button_size.label",
          "default": "default",
          "options": [
            {
              "value": "small",
              "label": "t:shared.settings.button_size.options__0.label"
            },
            {
              "value": "default",
              "label": "t:shared.settings.button_size.options__1.label"
            },
            {
              "value": "large",
              "label": "t:shared.settings.button_size.options__2.label"
            }
          ]
        },
        {
          "type": "select",
          "id": "button_icon",
          "label": "t:sections.text_section.blocks.button.settings.button_icon.label",
          "default": "none",
          "options": [
            {
              "value": "none",
              "label": "t:shared.options.none"
            },
            {
              "value": "arrow-right",
              "label": "t:sections.text_section.blocks.button.settings.button_icon.options__1.label"
            },
            {
              "value": "arrow-up-right",
              "label": "t:sections.text_section.blocks.button.settings.button_icon.options__2.label"
            },
            {
              "value": "caret-right",
              "label": "t:sections.text_section.blocks.button.settings.button_icon.options__3.label"
            },
            {
              "value": "plus",
              "label": "t:sections.text_section.blocks.button.settings.button_icon.options__4.label"
            },
            {
              "value": "shopping-bag",
              "label": "t:sections.text_section.blocks.button.settings.button_icon.options__5.label"
            },
            {
              "value": "heart",
              "label": "t:sections.text_section.blocks.button.settings.button_icon.options__6.label"
            },
            {
              "value": "play",
              "label": "t:sections.text_section.blocks.button.settings.button_icon.options__7.label"
            },
            {
              "value": "envelope",
              "label": "t:sections.text_section.blocks.button.settings.button_icon.options__8.label"
            },
            {
              "value": "phone",
              "label": "t:sections.text_section.blocks.button.settings.button_icon.options__9.label"
            },
            {
              "value": "chat",
              "label": "t:sections.text_section.blocks.button.settings.button_icon.options__10.label"
            }
          ]
        },
        {
          "type": "select",
          "id": "icon_position",
          "label": "t:sections.text_section.blocks.button.settings.icon_position.label",
          "default": "right",
          "options": [
            {
              "value": "left",
              "label": "t:shared.options.left"
            },
            {
              "value": "right",
              "label": "t:shared.options.right"
            }
          ]
        }
      ]
    }
  ],
  "presets": [
    {
      "name": "t:sections.text_section.presets.text_section.name",
      "category": "t:shared.categories.text",
      "blocks": [
        {
          "type": "button",
          "settings": {
            "button_text": "t:sections.text_section.presets.text_section.blocks.button.0.button_text",
            "button_style": "t:sections.text_section.presets.text_section.blocks.button.0.button_style",
            "button_icon": "t:sections.text_section.presets.text_section.blocks.button.0.button_icon"
          }
        },
        {
          "type": "button",
          "settings": {
            "button_text": "t:sections.text_section.presets.text_section.blocks.button.1.button_text",
            "button_style": "t:sections.text_section.presets.text_section.blocks.button.1.button_style"
          }
        }
      ]
    }
  ],
  "disabled_on": {
    "groups": [
      "header",
      "footer"
    ]
  }
}
{% endschema %}
