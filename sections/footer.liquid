{%- comment -%}
  Footer Section - Simple centered footer
  Layout: Nav links (centered), Social icons, Copyright
{%- endcomment -%}

<style>
  {% if section.settings.enable_reveal_effect %}
  .footer-wrapper { position: fixed; bottom: 0; left: 0; right: 0; z-index: 0; }
  .site-content { position: relative; z-index: 1; background-color: var(--color-background); margin-bottom: var(--footer-height, 0px); }
  {% endif %}
  .footer-section { padding: clamp(4rem, 10vh, 6rem) 0; }
  .back-to-top-text { position: relative; display: inline-block; overflow: hidden; }
  .back-to-top-text span { display: inline-block; transition: transform 0.3s ease; }
  .back-to-top-text span::after { content: attr(data-hover); position: absolute; left: 0; top: 100%; white-space: nowrap; }
  .back-to-top:hover .back-to-top-text span { transform: translateY(-100%); }
</style>

<div class="footer-wrapper" data-footer-wrapper>
<footer class="footer-section overflow-hidden" style="background-color: {{ section.settings.background_color }}; color: {{ section.settings.text_color }};" data-footer-section>
  <div class="page-container">
    {%- comment -%} Navigation Links - Centered {%- endcomment -%}
    {% if section.settings.menu != blank %}
      <nav aria-label="Footer" class="-mb-6 flex flex-wrap justify-center gap-x-12 gap-y-3 text-sm">
        {% for link in section.settings.menu.links %}
          <a href="{{ link.url }}" class="opacity-60 hover:opacity-100 transition-opacity duration-300" {{ block.shopify_attributes }}>
            {{ link.title }}
          </a>
        {% endfor %}
      </nav>
    {% endif %}

    {%- comment -%} Social Links - Centered {%- endcomment -%}
    {% if section.settings.show_social %}
      <div class="mt-16 flex justify-center gap-x-10">
        {% if settings.social_instagram_link != blank %}
          <a href="{{ settings.social_instagram_link }}" target="_blank" rel="noopener" class="opacity-60 hover:opacity-100 transition-opacity duration-300">
            <span class="sr-only">Instagram</span>
            <i class="ph ph-instagram-logo text-2xl"></i>
          </a>
        {% endif %}
        {% if settings.social_facebook_link != blank %}
          <a href="{{ settings.social_facebook_link }}" target="_blank" rel="noopener" class="opacity-60 hover:opacity-100 transition-opacity duration-300">
            <span class="sr-only">Facebook</span>
            <i class="ph ph-facebook-logo text-2xl"></i>
          </a>
        {% endif %}
        {% if settings.social_twitter_link != blank %}
          <a href="{{ settings.social_twitter_link }}" target="_blank" rel="noopener" class="opacity-60 hover:opacity-100 transition-opacity duration-300">
            <span class="sr-only">X</span>
            <i class="ph ph-x-logo text-2xl"></i>
          </a>
        {% endif %}
        {% if settings.social_tiktok_link != blank %}
          <a href="{{ settings.social_tiktok_link }}" target="_blank" rel="noopener" class="opacity-60 hover:opacity-100 transition-opacity duration-300">
            <span class="sr-only">TikTok</span>
            <i class="ph ph-tiktok-logo text-2xl"></i>
          </a>
        {% endif %}
        {% if settings.social_pinterest_link != blank %}
          <a href="{{ settings.social_pinterest_link }}" target="_blank" rel="noopener" class="opacity-60 hover:opacity-100 transition-opacity duration-300">
            <span class="sr-only">Pinterest</span>
            <i class="ph ph-pinterest-logo text-2xl"></i>
          </a>
        {% endif %}
        {% if settings.social_youtube_link != blank %}
          <a href="{{ settings.social_youtube_link }}" target="_blank" rel="noopener" class="opacity-60 hover:opacity-100 transition-opacity duration-300">
            <span class="sr-only">YouTube</span>
            <i class="ph ph-youtube-logo text-2xl"></i>
          </a>
        {% endif %}
      </div>
    {% endif %}

    {%- comment -%} Payment Icons {%- endcomment -%}
    {% if section.settings.show_payment_icons %}
      <div class="mt-10 flex flex-wrap justify-center gap-3">
        {% for type in shop.enabled_payment_types %}
          {{ type | payment_type_svg_tag: class: 'h-6' }}
        {% endfor %}
      </div>
    {% endif %}

    {%- comment -%} Copyright {%- endcomment -%}
    <p class="mt-10 text-center text-sm opacity-60">
      &copy; {{ 'now' | date: '%Y' }} {{ shop.name }}. {{ 'general.copyright' | t }}
    </p>

    {%- comment -%} Back to Top {%- endcomment -%}
    <div class="mt-10 flex justify-center">
      <button
        type="button"
        class="back-to-top section-link inline-flex items-center gap-2 text-xs font-medium tracking-widest opacity-60 hover:opacity-100 transition-opacity duration-300 cursor-pointer"
        data-back-to-top
      >
        <span class="back-to-top-text"><span data-hover="{{ 'general.back_to_top' | t }}">{{ 'general.back_to_top' | t }}</span></span>
        <i class="ph ph-arrow-up"></i>
      </button>
    </div>
  </div>
</footer>
</div>

<script>
(function() {
  const footerWrapper = document.querySelector('[data-footer-wrapper]');
  const footer = document.querySelector('[data-footer-section]');
  if (!footer || footer.dataset.footerInitialized) return;
  footer.dataset.footerInitialized = 'true';

  {% if section.settings.enable_reveal_effect %}
  // Calculate and set footer height for sticky reveal effect
  function updateFooterHeight() {
    if (footerWrapper) {
      const footerHeight = footerWrapper.offsetHeight;
      document.documentElement.style.setProperty('--footer-height', `${footerHeight}px`);
    }
  }

  // Initial calculation
  updateFooterHeight();

  // Recalculate on resize
  window.addEventListener('resize', updateFooterHeight);

  // Recalculate after Swup page transitions
  window.addEventListener('swup:contentReplaced', () => {
    requestAnimationFrame(updateFooterHeight);
  });
  {% endif %}

  // Back to top functionality
  const backToTopButtons = footer.querySelectorAll('[data-back-to-top]');
  backToTopButtons.forEach(btn => {
    btn.addEventListener('click', () => {
      // Use Lenis if available for smooth scroll
      if (window.pieces && window.pieces.lenis) {
        window.pieces.lenis.scrollTo(0, { duration: 1.5 });
      } else {
        window.scrollTo({ top: 0, behavior: 'smooth' });
      }
    });
  });
})();
</script>

{% schema %}
{
  "name": "Footer",
  "settings": [
    {
      "type": "header",
      "content": "Navigation"
    },
    {
      "type": "link_list",
      "id": "menu",
      "label": "Menu",
      "default": "footer"
    },
    {
      "type": "header",
      "content": "Layout"
    },
    {
      "type": "checkbox",
      "id": "enable_reveal_effect",
      "default": true,
      "label": "Enable reveal effect",
      "info": "Footer stays fixed at the bottom and is revealed as you scroll past the content"
    },
    {
      "type": "header",
      "content": "Social & Payment"
    },
    {
      "type": "checkbox",
      "id": "show_social",
      "label": "Show social links",
      "default": true
    },
    {
      "type": "checkbox",
      "id": "show_payment_icons",
      "label": "Show payment icons",
      "default": true
    },
    {
      "type": "header",
      "content": "Colors"
    },
    {
      "type": "color",
      "id": "background_color",
      "default": "#f5f5f5",
      "label": "Background color"
    },
    {
      "type": "color",
      "id": "text_color",
      "default": "#000000",
      "label": "Text color"
    }
  ],
  "presets": [
    {
      "name": "Footer"
    }
  ]
}
{% endschema %}
