{%- comment -%}
  Footer Section - Modern Tailwind Version
  Minimal, clean footer design
{%- endcomment -%}

{%- liquid
  assign has_social_icons = true
  if settings.social_facebook_link == blank and settings.social_instagram_link == blank and settings.social_youtube_link == blank and settings.social_tiktok_link == blank and settings.social_twitter_link == blank and settings.social_pinterest_link == blank and settings.social_snapchat_link == blank and settings.social_tumblr_link == blank and settings.social_vimeo_link == blank
    assign has_social_icons = false
  endif
-%}

<footer class="bg-neutral-900 text-white">
  <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">

    {%- comment -%} Main Footer Content {%- endcomment -%}
    {%- if section.blocks.size > 0 or section.settings.newsletter_enable or section.settings.show_social and has_social_icons -%}
      <div class="py-12 md:py-16 lg:py-20">
        <div class="grid grid-cols-2 md:grid-cols-4 lg:grid-cols-5 gap-8 lg:gap-12">

          {%- comment -%} Brand Column {%- endcomment -%}
          <div class="col-span-2 lg:col-span-1">
            {%- if settings.brand_image != blank -%}
              <div class="mb-4">
                <img
                  src="{{ settings.brand_image | image_url: width: 200 }}"
                  alt="{{ shop.name }}"
                  class="h-8 w-auto brightness-0 invert"
                  width="{{ settings.brand_image_width | default: 120 }}"
                  height="{{ settings.brand_image_width | default: 120 | divided_by: settings.brand_image.aspect_ratio }}"
                  loading="lazy"
                >
              </div>
            {%- else -%}
              <a href="{{ routes.root_url }}" class="text-xl font-semibold tracking-tight">
                {{ shop.name }}
              </a>
            {%- endif -%}

            {%- if settings.brand_description != blank -%}
              <p class="mt-4 text-sm text-neutral-400 leading-relaxed">
                {{ settings.brand_description }}
              </p>
            {%- endif -%}

            {%- if section.settings.show_social and has_social_icons -%}
              <div class="flex items-center gap-4 mt-6">
                {%- if settings.social_facebook_link != blank -%}
                  <a href="{{ settings.social_facebook_link }}" class="text-neutral-400 hover:text-white transition-colors" aria-label="Facebook">
                    {%- render 'icon', name: 'facebook', size: '20' -%}
                  </a>
                {%- endif -%}
                {%- if settings.social_instagram_link != blank -%}
                  <a href="{{ settings.social_instagram_link }}" class="text-neutral-400 hover:text-white transition-colors" aria-label="Instagram">
                    {%- render 'icon', name: 'instagram', size: '20' -%}
                  </a>
                {%- endif -%}
                {%- if settings.social_twitter_link != blank -%}
                  <a href="{{ settings.social_twitter_link }}" class="text-neutral-400 hover:text-white transition-colors" aria-label="Twitter">
                    {%- render 'icon', name: 'twitter', size: '20' -%}
                  </a>
                {%- endif -%}
                {%- if settings.social_youtube_link != blank -%}
                  <a href="{{ settings.social_youtube_link }}" class="text-neutral-400 hover:text-white transition-colors" aria-label="YouTube">
                    {%- render 'icon', name: 'youtube', size: '20' -%}
                  </a>
                {%- endif -%}
                {%- if settings.social_tiktok_link != blank -%}
                  <a href="{{ settings.social_tiktok_link }}" class="text-neutral-400 hover:text-white transition-colors" aria-label="TikTok">
                    {%- render 'icon', name: 'tiktok', size: '20' -%}
                  </a>
                {%- endif -%}
                {%- if settings.social_pinterest_link != blank -%}
                  <a href="{{ settings.social_pinterest_link }}" class="text-neutral-400 hover:text-white transition-colors" aria-label="Pinterest">
                    {%- render 'icon', name: 'pinterest', size: '20' -%}
                  </a>
                {%- endif -%}
              </div>
            {%- endif -%}
          </div>

          {%- comment -%} Dynamic Blocks {%- endcomment -%}
          {%- for block in section.blocks -%}
            {%- case block.type -%}
              {%- when 'link_list' -%}
                {%- if block.settings.menu != blank -%}
                  <div class="col-span-1" {{ block.shopify_attributes }}>
                    {%- if block.settings.heading != blank -%}
                      <h3 class="text-sm font-semibold uppercase tracking-wider mb-4">
                        {{ block.settings.heading }}
                      </h3>
                    {%- endif -%}
                    <ul class="space-y-3">
                      {%- for link in block.settings.menu.links -%}
                        <li>
                          <a
                            href="{{ link.url }}"
                            class="text-sm text-neutral-400 hover:text-white transition-colors"
                          >
                            {{ link.title | escape }}
                          </a>
                        </li>
                      {%- endfor -%}
                    </ul>
                  </div>
                {%- endif -%}

              {%- when 'text' -%}
                <div class="col-span-1" {{ block.shopify_attributes }}>
                  {%- if block.settings.heading != blank -%}
                    <h3 class="text-sm font-semibold uppercase tracking-wider mb-4">
                      {{ block.settings.heading }}
                    </h3>
                  {%- endif -%}
                  <div class="text-sm text-neutral-400 leading-relaxed prose prose-invert prose-sm">
                    {{ block.settings.subtext }}
                  </div>
                </div>

              {%- when 'brand_information' -%}
                {%- comment -%} Handled above {%- endcomment -%}

              {%- when 'image' -%}
                <div class="col-span-1 {{ block.settings.alignment }}" {{ block.shopify_attributes }}>
                  {%- if block.settings.image != blank -%}
                    {%- assign image_height = block.settings.image_width | divided_by: block.settings.image.aspect_ratio -%}
                    <img
                      src="{{ block.settings.image | image_url: width: block.settings.image_width }}"
                      alt="{{ block.settings.image.alt | escape }}"
                      class="w-auto max-w-full"
                      style="max-width: {{ block.settings.image_width }}px;"
                      width="{{ block.settings.image_width }}"
                      height="{{ image_height | round }}"
                      loading="lazy"
                    >
                  {%- endif -%}
                </div>

              {%- when '@app' -%}
                <div class="col-span-1" {{ block.shopify_attributes }}>
                  {% render block %}
                </div>
            {%- endcase -%}
          {%- endfor -%}

          {%- comment -%} Newsletter Column {%- endcomment -%}
          {%- if section.settings.newsletter_enable -%}
            <div class="col-span-2 lg:col-span-1">
              {%- if section.settings.newsletter_heading != blank -%}
                <h3 class="text-sm font-semibold uppercase tracking-wider mb-4">
                  {{ section.settings.newsletter_heading }}
                </h3>
              {%- endif -%}
              {%- form 'customer', id: 'FooterNewsletter', class: 'mt-2' -%}
                <input type="hidden" name="contact[tags]" value="newsletter">
                <div class="flex gap-2">
                  <input
                    type="email"
                    name="contact[email]"
                    id="NewsletterForm--{{ section.id }}"
                    class="flex-1 px-4 py-2.5 bg-neutral-800 border border-neutral-700 rounded-lg text-sm text-white placeholder-neutral-500 focus:outline-none focus:ring-2 focus:ring-white focus:border-transparent"
                    placeholder="{{ 'newsletter.label' | t }}"
                    required
                    autocomplete="email"
                  >
                  <button
                    type="submit"
                    class="px-4 py-2.5 bg-white text-neutral-900 text-sm font-medium rounded-lg hover:bg-neutral-100 transition-colors"
                    aria-label="{{ 'newsletter.button_label' | t }}"
                  >
                    {%- render 'icon', name: 'arrow-right', size: '16' -%}
                  </button>
                </div>
                {%- if form.errors -%}
                  <p class="mt-2 text-sm text-red-400">
                    {{ form.errors.translated_fields.email | capitalize }} {{ form.errors.messages.email }}
                  </p>
                {%- endif -%}
                {%- if form.posted_successfully? -%}
                  <p class="mt-2 text-sm text-green-400">
                    {{ 'newsletter.success' | t }}
                  </p>
                {%- endif -%}
              {%- endform -%}
            </div>
          {%- endif -%}

        </div>
      </div>
    {%- endif -%}

    {%- comment -%} Bottom Bar {%- endcomment -%}
    <div class="py-6 border-t border-neutral-800">
      <div class="flex flex-col md:flex-row md:items-center md:justify-between gap-4">

        {%- comment -%} Copyright & Policies {%- endcomment -%}
        <div class="flex flex-wrap items-center gap-x-4 gap-y-2 text-sm text-neutral-400">
          <span>&copy; {{ 'now' | date: '%Y' }} {{ shop.name }}</span>
          {%- if section.settings.show_policy -%}
            {%- for policy in shop.policies -%}
              {%- if policy != blank -%}
                <a href="{{ policy.url }}" class="hover:text-white transition-colors">
                  {{ policy.title | escape }}
                </a>
              {%- endif -%}
            {%- endfor -%}
          {%- endif -%}
        </div>

        {%- comment -%} Localization & Payment {%- endcomment -%}
        <div class="flex flex-wrap items-center gap-4">
          {%- if section.settings.enable_country_selector and localization.available_countries.size > 1 -%}
            <div class="relative">
              <localization-form>
                {%- form 'localization', id: 'FooterCountryForm' -%}
                  <label for="FooterCountrySelect" class="sr-only">{{ 'localization.country_label' | t }}</label>
                  <select
                    id="FooterCountrySelect"
                    name="country_code"
                    class="appearance-none bg-neutral-800 border border-neutral-700 rounded-lg pl-3 pr-8 py-1.5 text-sm text-neutral-300 hover:border-neutral-600 focus:outline-none focus:ring-2 focus:ring-white cursor-pointer"
                    onchange="this.form.submit()"
                  >
                    {%- for country in localization.available_countries -%}
                      <option
                        value="{{ country.iso_code }}"
                        {% if country.iso_code == localization.country.iso_code %}selected{% endif %}
                      >
                        {{ country.name }} ({{ country.currency.iso_code }} {{ country.currency.symbol }})
                      </option>
                    {%- endfor -%}
                  </select>
                  <div class="absolute inset-y-0 right-0 flex items-center pr-2 pointer-events-none text-neutral-400">
                    {%- render 'icon', name: 'caret-down', size: '12' -%}
                  </div>
                {%- endform -%}
              </localization-form>
            </div>
          {%- endif -%}

          {%- if section.settings.enable_language_selector and localization.available_languages.size > 1 -%}
            <div class="relative">
              <localization-form>
                {%- form 'localization', id: 'FooterLanguageForm' -%}
                  <label for="FooterLanguageSelect" class="sr-only">{{ 'localization.language_label' | t }}</label>
                  <select
                    id="FooterLanguageSelect"
                    name="locale_code"
                    class="appearance-none bg-neutral-800 border border-neutral-700 rounded-lg pl-3 pr-8 py-1.5 text-sm text-neutral-300 hover:border-neutral-600 focus:outline-none focus:ring-2 focus:ring-white cursor-pointer"
                    onchange="this.form.submit()"
                  >
                    {%- for language in localization.available_languages -%}
                      <option
                        value="{{ language.iso_code }}"
                        {% if language.iso_code == localization.language.iso_code %}selected{% endif %}
                      >
                        {{ language.endonym_name | capitalize }}
                      </option>
                    {%- endfor -%}
                  </select>
                  <div class="absolute inset-y-0 right-0 flex items-center pr-2 pointer-events-none text-neutral-400">
                    {%- render 'icon', name: 'caret-down', size: '12' -%}
                  </div>
                {%- endform -%}
              </localization-form>
            </div>
          {%- endif -%}

          {%- if section.settings.payment_enable -%}
            <div class="flex items-center gap-2">
              {%- for type in shop.enabled_payment_types -%}
                <span class="text-neutral-500">
                  {{ type | payment_type_svg_tag: class: 'h-6 w-auto' }}
                </span>
              {%- endfor -%}
            </div>
          {%- endif -%}
        </div>

      </div>
    </div>

  </div>
</footer>

{% schema %}
{
  "name": "t:sections.footer.name",
  "blocks": [
    {
      "type": "@app"
    },
    {
      "type": "link_list",
      "name": "t:sections.footer.blocks.link_list.name",
      "settings": [
        {
          "type": "inline_richtext",
          "id": "heading",
          "default": "Quick links",
          "label": "t:sections.footer.blocks.link_list.settings.heading.label"
        },
        {
          "type": "link_list",
          "id": "menu",
          "default": "footer",
          "label": "t:sections.footer.blocks.link_list.settings.menu.label"
        }
      ]
    },
    {
      "type": "brand_information",
      "name": "t:sections.footer.blocks.brand_information.name",
      "settings": [
        {
          "type": "paragraph",
          "content": "t:sections.footer.blocks.brand_information.settings.paragraph.content"
        },
        {
          "type": "checkbox",
          "id": "show_social",
          "default": true,
          "label": "t:sections.footer.blocks.brand_information.settings.show_social.label",
          "info": "t:sections.footer.blocks.brand_information.settings.show_social.info"
        }
      ]
    },
    {
      "type": "text",
      "name": "t:sections.footer.blocks.text.name",
      "settings": [
        {
          "type": "inline_richtext",
          "id": "heading",
          "default": "Our mission",
          "label": "t:sections.footer.blocks.text.settings.heading.label"
        },
        {
          "type": "richtext",
          "id": "subtext",
          "default": "<p>Share your brand story and mission with your customers.</p>",
          "label": "t:sections.footer.blocks.text.settings.subtext.label"
        }
      ]
    },
    {
      "type": "image",
      "name": "Image",
      "settings": [
        {
          "type": "image_picker",
          "id": "image",
          "label": "Image"
        },
        {
          "type": "range",
          "id": "image_width",
          "min": 50,
          "max": 550,
          "step": 5,
          "unit": "px",
          "label": "Width",
          "default": 100
        },
        {
          "type": "select",
          "id": "alignment",
          "label": "Alignment",
          "options": [
            {
              "value": "",
              "label": "Left"
            },
            {
              "value": "text-center",
              "label": "Center"
            },
            {
              "value": "text-right",
              "label": "Right"
            }
          ],
          "default": "text-center"
        }
      ]
    }
  ],
  "settings": [
    {
      "type": "header",
      "content": "t:sections.footer.settings.header__1.content",
      "info": "t:sections.footer.settings.header__1.info"
    },
    {
      "type": "checkbox",
      "id": "newsletter_enable",
      "default": true,
      "label": "t:sections.footer.settings.newsletter_enable.label"
    },
    {
      "type": "inline_richtext",
      "id": "newsletter_heading",
      "default": "Subscribe to our emails",
      "label": "t:sections.footer.settings.newsletter_heading.label"
    },
    {
      "type": "header",
      "content": "Social media"
    },
    {
      "type": "checkbox",
      "id": "show_social",
      "default": true,
      "label": "t:sections.footer.settings.show_social.label",
      "info": "t:sections.footer.settings.show_social.info"
    },
    {
      "type": "header",
      "content": "Country/region selector"
    },
    {
      "type": "checkbox",
      "id": "enable_country_selector",
      "default": true,
      "label": "t:sections.footer.settings.enable_country_selector.label",
      "info": "t:sections.footer.settings.enable_country_selector.info"
    },
    {
      "type": "checkbox",
      "id": "enable_language_selector",
      "default": true,
      "label": "t:sections.footer.settings.enable_language_selector.label",
      "info": "t:sections.footer.settings.enable_language_selector.info"
    },
    {
      "type": "header",
      "content": "Payment methods"
    },
    {
      "type": "checkbox",
      "id": "payment_enable",
      "default": true,
      "label": "t:sections.footer.settings.payment_enable.label"
    },
    {
      "type": "checkbox",
      "id": "show_policy",
      "default": true,
      "label": "t:sections.footer.settings.show_policy.label",
      "info": "t:sections.footer.settings.show_policy.info"
    }
  ],
  "presets": [
    {
      "name": "t:sections.footer.presets.name",
      "blocks": [
        {
          "type": "link_list"
        },
        {
          "type": "link_list",
          "settings": {
            "heading": "Info",
            "menu": "footer"
          }
        }
      ]
    }
  ]
}
{% endschema %}
