{%- comment -%}
  Search Section - Skeleton + Tailwind
{%- endcomment -%}

<section class="bg-white">
  <div class="mx-auto max-w-7xl px-4 py-16 sm:px-6 sm:py-24 lg:px-8">
    <h1 class="text-3xl font-bold tracking-tight text-gray-900">{{ 'search.title' | t }}</h1>

    <form action="{{ routes.search_url }}" method="get" role="search" class="mt-8">
      <div class="flex gap-4">
        <div class="flex-1">
          <input
            type="search"
            name="q"
            value="{{ search.terms | escape }}"
            placeholder="{{ 'search.placeholder' | t }}"
            class="block w-full rounded-md border-0 py-3 px-4 text-gray-900 ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm"
          >
        </div>
        <button type="submit" class="inline-flex items-center rounded-md bg-indigo-600 px-4 py-3 text-sm font-semibold text-white hover:bg-indigo-500">
          <i class="ph ph-magnifying-glass mr-2"></i>
          {{ 'search.submit' | t }}
        </button>
      </div>
    </form>

    {% if search.performed %}
      {% if search.results_count == 0 %}
        <p class="mt-8 text-gray-500">{{ 'search.no_results_html' | t: terms: search.terms }}</p>
      {% else %}
        <p class="mt-8 text-sm text-gray-500">{{ 'search.results_for_html' | t: terms: search.terms, count: search.results_count }}</p>

        <div class="mt-8 grid grid-cols-1 gap-x-6 gap-y-10 sm:grid-cols-2 lg:grid-cols-4 xl:gap-x-8">
          {% paginate search.results by 20 %}
            {% for result in search.results %}
              <div class="group relative">
                <a href="{{ result.url }}" class="block">
                  {% assign featured_image = result.featured_image | default: result.image %}
                  <div class="aspect-square w-full overflow-hidden rounded-lg bg-gray-100">
                    {% if featured_image %}
                      {{ featured_image | image_url: width: 400 | image_tag:
                        class: 'h-full w-full object-cover object-center group-hover:opacity-75 transition-opacity',
                        loading: 'lazy'
                      }}
                    {% else %}
                      <div class="flex h-full items-center justify-center">
                        <i class="ph ph-file-text text-4xl text-gray-300"></i>
                      </div>
                    {% endif %}
                  </div>
                  <div class="mt-4">
                    <h3 class="text-sm font-medium text-gray-900">{{ result.title }}</h3>
                    {% if result.price %}
                      <p class="mt-1 text-sm text-gray-500">{{ result.price | money }}</p>
                    {% endif %}
                  </div>
                </a>
              </div>
            {% endfor %}
          {% endpaginate %}
        </div>

        {% if paginate.pages > 1 %}
          <nav class="mt-10 flex items-center justify-center gap-2">
            {% if paginate.previous %}
              <a href="{{ paginate.previous.url }}" class="rounded-md bg-white px-3 py-2 text-sm font-semibold text-gray-900 ring-1 ring-inset ring-gray-300 hover:bg-gray-50">
                <i class="ph ph-arrow-left"></i>
              </a>
            {% endif %}
            {% if paginate.next %}
              <a href="{{ paginate.next.url }}" class="rounded-md bg-white px-3 py-2 text-sm font-semibold text-gray-900 ring-1 ring-inset ring-gray-300 hover:bg-gray-50">
                <i class="ph ph-arrow-right"></i>
              </a>
            {% endif %}
          </nav>
        {% endif %}
      {% endif %}
    {% endif %}
  </div>
</section>

{% schema %}
{
  "name": "Search",
  "settings": []
}
{% endschema %}
