
{%- comment -%}
  Footer Modern Design
  Split layout with branding on left, navigation and social on right
  Uses blocks for flexible content arrangement

  Required variables:
  - section: The section object with blocks and settings
{%- endcomment -%}

<div class="footer-modern">
  <div class="footer-modern__brand">
    {%- liquid
      assign brand_block = nil
      for block in section.blocks
        if block.type == 'brand'
          assign brand_block = block
          break
        endif
      endfor
    -%}
    {%- if brand_block.settings.logo != blank -%}
      {{ brand_block.settings.logo | image_url: width: 400 | image_tag: class: 'footer-modern__logo', loading: 'lazy', decoding: 'async' }}
    {%- else -%}
      <span class="footer-brand">{{ shop.name }}</span>
    {%- endif -%}

    {%- if brand_block.settings.text != blank -%}
      <p class="footer-modern__description">{{ brand_block.settings.text }}</p>
    {%- endif -%}

    {%- for block in section.blocks -%}
      {%- if block.type == 'newsletter' -%}
        <div class="footer-modern__newsletter" {{ block.shopify_attributes }}>
          <h3 class="footer-modern__newsletter-heading text-label">{{ block.settings.heading | default: 'Subscribe to our newsletter' }}</h3>
          {%- form 'customer', id: 'FooterNewsletterModern' -%}
            <input type="hidden" name="contact[tags]" value="newsletter">
            <div class="footer-modern__newsletter-form">
              <input
                type="email"
                name="contact[email]"
                class="footer-modern__newsletter-input"
                placeholder="{{ 'newsletter.label' | t }}"
                autocomplete="email"
                required
              >
              <button type="submit" class="footer-modern__newsletter-btn" aria-label="{{ 'newsletter.button_label' | t }}">
                <i class="ph ph-arrow-right"></i>
              </button>
            </div>
          {%- endform -%}
        </div>
      {%- endif -%}
    {%- endfor -%}
  </div>

  <div class="footer-modern__right">
    {%- for block in section.blocks -%}
      {%- if block.type == 'navigation' and block.settings.menu != blank -%}
        <nav class="footer-modern__nav{% if block.settings.nav_uppercase %} uppercase{% endif %}" aria-label="Footer" {{ block.shopify_attributes }}>
          {%- for link in block.settings.menu.links -%}
            <a href="{{ link.url }}">{{ link.title }}</a>
          {%- endfor -%}
        </nav>
      {%- endif -%}
    {%- endfor -%}

    <div class="footer-modern__bottom">
      {%- for block in section.blocks -%}
        {%- if block.type == 'social' -%}
          <div class="footer-modern__social" {{ block.shopify_attributes }}>
            {%- render 'footer-social-icons' -%}
          </div>
        {%- endif -%}
        {%- if block.type == 'localization' -%}
          <div {{ block.shopify_attributes }}>
            {%- render 'localization-form', show_country: block.settings.show_country, show_language: block.settings.show_language -%}
          </div>
        {%- endif -%}
        {%- if block.type == 'follow_on_shop' -%}
          <div {{ block.shopify_attributes }}>
            {%- if shop.features.follow_on_shop? -%}
              {{ shop | login_button: action: 'follow' }}
            {%- endif -%}
          </div>
        {%- endif -%}
      {%- endfor -%}
    </div>
  </div>
</div>

{%- liquid
  assign has_bar_content = false
  for block in section.blocks
    if block.type == 'copyright' or block.type == 'payment' or block.type == 'back_to_top'
      assign has_bar_content = true
      break
    endif
  endfor
-%}

{%- if has_bar_content -%}
  <div class="footer-modern__bar">
    {%- for block in section.blocks -%}
      {%- case block.type -%}
        {%- when 'copyright' -%}
          <p class="footer-modern__copyright" {{ block.shopify_attributes }}>&copy; {{ 'now' | date: '%Y' }} {{ shop.name }}. {{ 'general.copyright' | t }}</p>

        {%- when 'payment' -%}
          <div class="footer-modern__payment{% if block.settings.grayscale %} footer-modern__payment--grayscale{% endif %}" {{ block.shopify_attributes }}>
            {% for type in shop.enabled_payment_types %}
              {{ type | payment_type_svg_tag }}
            {% endfor %}
          </div>

        {%- when 'back_to_top' -%}
          <button type="button" class="link-cta uppercase bg-transparent border-none cursor-pointer p-0" data-back-to-top {{ block.shopify_attributes }}>
            <span class="link-cta-text"><span data-hover="{{ 'general.back_to_top' | t }}">{{ 'general.back_to_top' | t }}</span></span>
            <i class="ph ph-arrow-up"></i>
          </button>
      {%- endcase -%}
    {%- endfor -%}
  </div>
{%- endif -%}
