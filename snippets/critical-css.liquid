{%- comment -%}
  Critical CSS - Minimal inlined styles for FOUC prevention only

  IMPORTANT: All resets and utilities are handled by Tailwind's @layer system.
  DO NOT add unlayered CSS here as it overrides Tailwind utilities.

  Only includes:
  - Animation initial states (opacity: 0, clip-path) to prevent flash
  - Page transition overlay
{%- endcomment -%}

<style>
  /* ==========================================================================
     Animation Initial States - Prevent flash of animated content
     These use attribute selectors which won't conflict with class utilities
     ========================================================================== */

  /* Global tween system - hide elements that will animate in */
  [data-tween]:not([data-tween-type="clip-right"]):not([data-tween-type="clip-up"]):not([data-tween-type="clip-down"]),
  [data-tween-type="fade"],
  [data-tween-type="fade-up"],
  [data-tween-type="fade-down"],
  [data-tween-type="fade-left"],
  [data-tween-type="fade-right"],
  [data-tween-type="scale"],
  [data-tween-type="scale-up"],
  [data-tween-type="split-text"] {
    opacity: 0;
  }

  /* Clip animations - use clip-path only (no opacity) */
  [data-tween-type="clip-right"] {
    clip-path: inset(0 100% 0 0);
  }

  [data-tween-type="clip-up"] {
    clip-path: inset(100% 0 0 0);
  }

  [data-tween-type="clip-down"] {
    clip-path: inset(0 0 100% 0);
  }

  /* When animations disabled, show ALL data-tween elements immediately */
  html.animations-disabled [data-tween],
  html.animations-disabled [data-tween-type] {
    opacity: 1 !important;
    transform: none !important;
    clip-path: none !important;
  }

  /* Reduced motion - show everything immediately */
  @media (prefers-reduced-motion: reduce) {
    [data-tween],
    [data-tween-type] {
      opacity: 1 !important;
      transform: none !important;
      clip-path: none !important;
    }
  }

  /* Legacy: Hide content that will be animated in */
  .is-loading .product-card-image,
  .is-loading .collection-card-image,
  .is-loading .blog-item-image,
  .is-loading .metro-item-inner {
    clip-path: inset(0 100% 0 0);
  }

  /* When animations disabled, show content immediately */
  html.animations-disabled .is-loading .product-card-image,
  html.animations-disabled .is-loading .collection-card-image,
  html.animations-disabled .is-loading .blog-item-image,
  html.animations-disabled .is-loading .metro-item-inner {
    clip-path: none;
  }

  /* Page transition overlay - hidden by default */
  .page-transition-overlay {
    transform: scaleY(0);
  }

  /* Mobile nav drawer initial state for clip-path animation */
  .mobile-nav__drawer {
    clip-path: inset(0 0 100% 0);
  }
</style>
