{%- comment -%}
  Newsletter Design 3: Card
  Centered card with gradient background effect
  Colors inherited from color scheme via CSS variables
{%- endcomment -%}

{%- assign container_class = container_class | default: 'page-container' -%}
<div class="newsletter-card bg-(--color-background)" data-tween-group="newsletter-card">
  <div class="{{ container_class }}">
    <div class="relative isolate overflow-hidden px-6 py-16 sm:px-16 xl:py-24 rounded-(--card-radius) border-solid border-(--color-border) bg-(--color-background-secondary) text-(--color-text)" style="box-shadow: var(--card-shadow); border-width: var(--card-border-width);" data-tween data-tween-type="scale">
      {% if title != blank %}
        <h3 class="newsletter-title mx-auto max-w-3xl text-center" data-tween data-tween-type="split-text">
          {{ title }}
        </h3>
      {% endif %}
      {% if text != blank %}
        <p class="mx-auto mt-6 max-w-lg text-center text-base opacity-70" data-tween data-tween-type="fade-up">{{ text }}</p>
      {% endif %}
      <div class="mx-auto mt-10 max-w-md" data-tween data-tween-type="fade-up">
      {% form 'customer' %}
        <div class="flex gap-x-4">
          <label for="newsletter-email-card" class="sr-only">{{ 'customers.register.email' | t }}</label>
          <input
            id="newsletter-email-card"
            type="email"
            name="contact[email]"
            required
            placeholder="{{ 'customers.register.email' | t }}"
            autocomplete="email"
            class="input min-w-0 flex-auto"
          >
          <input type="hidden" name="contact[tags]" value="newsletter">
          {%- liquid
            # Determine button class based on style + color combination
            # Style: solid or outline
            # Color: primary (accent) or secondary (neutral)
            if button_style == 'outline'
              if button_color == 'secondary'
                assign btn_class = 'btn--secondary'
              else
                assign btn_class = 'btn--outline'
              endif
            else
              if button_color == 'secondary'
                assign btn_class = 'btn--solid-secondary'
              else
                assign btn_class = 'btn--primary'
              endif
            endif
          -%}
          {%- assign btn_text = button_text | default: 'Subscribe' -%}
          <button type="submit" class="btn {{ btn_class }} flex-none">
            {% render 'button-text', text: btn_text %}
          </button>
        </div>
        {% if privacy_link != blank %}
          <p class="mt-4 text-center text-sm text-(--color-text-secondary)">
            {{ privacy_text }} <a href="{{ privacy_link }}" class="font-semibold underline hover:no-underline">{{ privacy_link_text }}</a>.
          </p>
        {% endif %}
        {% if form.posted_successfully? %}
          <p class="mt-4 text-center text-sm text-green-400">{{ 'general.newsletter.success' | t }}</p>
        {% endif %}
        {% if form.errors %}
          <p class="mt-4 text-center text-sm text-red-400">{{ form.errors.messages['email'] }}</p>
        {% endif %}
      {% endform %}
      </div>

      {%- comment -%} Decorative gradient blob {%- endcomment -%}
      <svg viewBox="0 0 1024 1024" aria-hidden="true" class="absolute left-1/2 top-1/2 -z-10 w-[64rem] max-w-none -translate-x-1/2 opacity-20">
        <circle r="512" cx="512" cy="512" fill="url(#newsletter-gradient)" fill-opacity="0.7" />
        <defs>
          <radialGradient id="newsletter-gradient" r="1" cx="0" cy="0" gradientUnits="userSpaceOnUse" gradientTransform="translate(512 512) rotate(90) scale(512)">
            <stop stop-color="currentColor" />
            <stop offset="1" stop-color="currentColor" stop-opacity="0" />
          </radialGradient>
        </defs>
      </svg>
    </div>
  </div>
</div>
