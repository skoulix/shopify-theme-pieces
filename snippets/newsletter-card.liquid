{%- comment -%}
  Newsletter Design 3: Card
  Centered card with gradient background effect
{%- endcomment -%}

{%- liquid
  # Use global card settings
  assign card_radius = settings.card_radius
  assign card_border_width = settings.card_border_width
  assign card_shadow = settings.card_shadow
-%}

<style>
  .newsletter-card .newsletter-btn {
    position: relative;
    color: {{ text_color }};
    background: transparent;
    border: 1px solid {{ text_color }};
    overflow: hidden;
    transition: color 0.4s ease;
  }

  .newsletter-card .newsletter-btn::before {
    content: '';
    position: absolute;
    inset: 0;
    background: {{ text_color }};
    transform: scaleX(0);
    transform-origin: right;
    transition: transform 0.5s cubic-bezier(0.4, 0, 0.2, 1);
    z-index: 0;
    pointer-events: none;
  }

  .newsletter-card .newsletter-btn:hover::before {
    transform: scaleX(1);
    transform-origin: left;
  }

  .newsletter-card .newsletter-btn:hover {
    color: {{ card_color }};
  }

  .newsletter-card .newsletter-btn span {
    position: relative;
    z-index: 1;
  }
</style>

<div class="newsletter-card py-16 sm:py-24" style="background-color: {{ background_color }};">
  <div class="page-container">
    <div class="relative isolate overflow-hidden px-6 py-16 sm:px-16 xl:py-24" data-intro style="background-color: {{ card_color }}; color: {{ text_color }}; border-radius: {{ card_radius }}px;{% if card_border_width > 0 %} border: {{ card_border_width }}px solid {{ text_color }}20;{% endif %}{% case card_shadow %}{% when 'sm' %} box-shadow: 0 1px 2px 0 rgba(0, 0, 0, 0.05);{% when 'md' %} box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -2px rgba(0, 0, 0, 0.1);{% when 'lg' %} box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -4px rgba(0, 0, 0, 0.1);{% when 'hard' %} box-shadow: 4px 4px 0 0 {{ text_color }}20;{% endcase %}">
      {% if title != blank %}
        <h2 class="mx-auto max-w-3xl text-center text-3xl font-semibold tracking-tight sm:text-4xl lg:text-5xl font-heading" data-newsletter-title>
          {{ title }}
        </h2>
      {% endif %}
      {% if text != blank %}
        <p class="mx-auto mt-6 max-w-lg text-center text-base opacity-70" data-intro>{{ text }}</p>
      {% endif %}
      <div class="mx-auto mt-10 max-w-md" data-intro>
      {% form 'customer' %}
        <div class="flex gap-x-4">
          <label for="newsletter-email-card" class="sr-only">{{ 'customers.register.email' | t }}</label>
          <input
            id="newsletter-email-card"
            type="email"
            name="contact[email]"
            required
            placeholder="{{ 'customers.register.email' | t }}"
            autocomplete="email"
            class="min-w-0 flex-auto rounded-md px-3.5 py-2.5 text-sm placeholder:opacity-70 focus:outline-none transition-colors"
            style="background-color: {{ text_color }}15; color: {{ text_color }}; border: 1px solid {{ text_color }}30; caret-color: {{ text_color }};"
          >
          <input type="hidden" name="contact[tags]" value="newsletter">
          <button type="submit" class="btn newsletter-btn flex-none !py-2.5 !px-5 !text-xs">
            <span>{{ button_text | default: 'Subscribe' }}</span>
          </button>
        </div>
        {% if privacy_link != blank %}
          <p class="mt-4 text-center text-sm opacity-70">
            {{ privacy_text }} <a href="{{ privacy_link }}" class="font-semibold underline hover:no-underline">{{ privacy_link_text }}</a>.
          </p>
        {% endif %}
        {% if form.posted_successfully? %}
          <p class="mt-4 text-center text-sm text-green-400">{{ 'general.newsletter.success' | t }}</p>
        {% endif %}
        {% if form.errors %}
          <p class="mt-4 text-center text-sm text-red-400">{{ form.errors.messages['email'] }}</p>
        {% endif %}
      {% endform %}
      </div>

      {%- comment -%} Decorative gradient blob {%- endcomment -%}
      <svg viewBox="0 0 1024 1024" aria-hidden="true" class="absolute left-1/2 top-1/2 -z-10 w-[64rem] max-w-none -translate-x-1/2 opacity-20">
        <circle r="512" cx="512" cy="512" fill="url(#newsletter-gradient)" fill-opacity="0.7" />
        <defs>
          <radialGradient id="newsletter-gradient" r="1" cx="0" cy="0" gradientUnits="userSpaceOnUse" gradientTransform="translate(512 512) rotate(90) scale(512)">
            <stop stop-color="{{ text_color }}" />
            <stop offset="1" stop-color="{{ text_color }}" stop-opacity="0" />
          </radialGradient>
        </defs>
      </svg>
    </div>
  </div>
</div>
