
{%- comment -%}
  Loading Skeleton Components
  Provides skeleton loading states for various UI elements

  Parameters:
  - type: 'text', 'image', 'card', 'product-card', 'avatar', 'button', 'input'
  - width: Width (CSS value) - default varies by type
  - height: Height (CSS value) - default varies by type
  - lines: Number of text lines (for type='text')
  - class: Additional CSS classes
  - animated: Enable pulse animation (default: true)

  Usage:
  {% render 'skeleton', type: 'product-card' %}
  {% render 'skeleton', type: 'text', lines: 3 %}
  {% render 'skeleton', type: 'image', width: '100%', height: '200px' %}
{%- endcomment -%}

{%- liquid
  assign type = type | default: 'text'
  assign animated = animated | default: true
  assign animation_class = ''
  if animated
    assign animation_class = 'skeleton--animated'
  endif
-%}

{%- case type -%}
  {%- when 'text' -%}
    {%- assign lines = lines | default: 1 -%}
    <div class="skeleton-text {{ animation_class }} {{ class }}">
      {%- for i in (1..lines) -%}
        <div
          class="skeleton skeleton-text__line"
          {% if forloop.last and lines > 1 %}style="width: 60%;"{% endif %}
        ></div>
      {%- endfor -%}
    </div>

  {%- when 'image' -%}
    <div
      class="skeleton skeleton-image {{ animation_class }} {{ class }}"
      {% if width or height %}style="{% if width %}width: {{ width }};{% endif %}{% if height %}height: {{ height }};{% endif %}"{% endif %}
    >
      <i class="ph ph-image text-3xl opacity-30" aria-hidden="true"></i>
    </div>

  {%- when 'avatar' -%}
    {%- assign size = size | default: '48px' -%}
    <div
      class="skeleton skeleton-avatar {{ animation_class }} {{ class }}"
      style="width: {{ size }}; height: {{ size }};"
    ></div>

  {%- when 'button' -%}
    <div
      class="skeleton skeleton-button {{ animation_class }} {{ class }}"
      {% if width %}style="width: {{ width }};"{% endif %}
    ></div>

  {%- when 'input' -%}
    <div
      class="skeleton skeleton-input {{ animation_class }} {{ class }}"
      {% if width %}style="width: {{ width }};"{% endif %}
    ></div>

  {%- when 'card' -%}
    <div class="skeleton-card {{ animation_class }} {{ class }}">
      <div class="skeleton skeleton-card__image"></div>
      <div class="skeleton-card__content">
        <div class="skeleton skeleton-card__title"></div>
        <div class="skeleton skeleton-card__text"></div>
        <div class="skeleton skeleton-card__text" style="width: 70%;"></div>
      </div>
    </div>

  {%- when 'product-card' -%}
    <div class="skeleton-product-card {{ animation_class }} {{ class }}">
      <div class="skeleton skeleton-product-card__image"></div>
      <div class="skeleton-product-card__content">
        <div class="skeleton skeleton-product-card__vendor"></div>
        <div class="skeleton skeleton-product-card__title"></div>
        <div class="skeleton skeleton-product-card__price"></div>
      </div>
    </div>

  {%- when 'product-grid' -%}
    {%- assign columns = columns | default: 4 -%}
    {%- assign items = items | default: 8 -%}
    <div class="skeleton-product-grid {{ animation_class }}" style="--skeleton-columns: {{ columns }};">
      {%- for i in (1..items) -%}
        {% render 'skeleton', type: 'product-card', animated: false %}
      {%- endfor -%}
    </div>

  {%- when 'list-item' -%}
    <div class="skeleton-list-item {{ animation_class }} {{ class }}">
      <div class="skeleton skeleton-list-item__image"></div>
      <div class="skeleton-list-item__content">
        <div class="skeleton skeleton-list-item__title"></div>
        <div class="skeleton skeleton-list-item__text"></div>
      </div>
    </div>

  {%- else -%}
    {%- comment -%} Generic skeleton {%- endcomment -%}
    <div
      class="skeleton {{ animation_class }} {{ class }}"
      {% if width or height %}style="{% if width %}width: {{ width }};{% endif %}{% if height %}height: {{ height }};{% endif %}"{% endif %}
    ></div>
{%- endcase -%}
