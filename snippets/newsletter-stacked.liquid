{%- comment -%}
  Newsletter Design 2: Stacked
  Title on top, form below (left aligned)
{%- endcomment -%}

<style>
  .newsletter-stacked .newsletter-btn {
    position: relative;
    color: {{ text_color }};
    background: transparent;
    border: 1px solid {{ text_color }};
    overflow: hidden;
    transition: color 0.4s ease;
  }

  .newsletter-stacked .newsletter-btn::before {
    content: '';
    position: absolute;
    inset: 0;
    background: {{ text_color }};
    transform: scaleX(0);
    transform-origin: right;
    transition: transform 0.5s cubic-bezier(0.4, 0, 0.2, 1);
    z-index: 0;
    pointer-events: none;
  }

  .newsletter-stacked .newsletter-btn:hover::before {
    transform: scaleX(1);
    transform-origin: left;
  }

  .newsletter-stacked .newsletter-btn:hover {
    color: {{ background_color }};
  }

  .newsletter-stacked .newsletter-btn span {
    position: relative;
    z-index: 1;
  }
</style>

<div class="newsletter-stacked py-16 sm:py-24 lg:py-32" style="background-color: {{ background_color }}; color: {{ text_color }};">
  <div class="page-container">
    {% if title != blank %}
      <h2 class="max-w-2xl text-balance text-3xl font-semibold tracking-tight sm:text-4xl font-heading" data-newsletter-title>
        {{ title }}
      </h2>
    {% endif %}
    {% if text != blank %}
      <p class="mt-4 max-w-xl text-base opacity-70" data-intro>{{ text }}</p>
    {% endif %}
    <div data-intro>
    {% form 'customer', class: 'mt-10 max-w-md' %}
      <div class="flex gap-x-4">
        <label for="newsletter-email-stacked" class="sr-only">{{ 'customers.register.email' | t }}</label>
        <input
          id="newsletter-email-stacked"
          type="email"
          name="contact[email]"
          required
          placeholder="{{ 'customers.register.email' | t }}"
          autocomplete="email"
          class="min-w-0 flex-auto rounded-md px-3.5 py-2.5 text-sm placeholder:opacity-70 focus:outline-none transition-colors"
          style="background-color: transparent; color: {{ text_color }}; border: 1px solid {{ text_color }}40; caret-color: {{ text_color }};"
        >
        <input type="hidden" name="contact[tags]" value="newsletter">
        <button type="submit" class="btn newsletter-btn flex-none !py-2.5 !px-5 !text-xs">
          <span>{{ button_text | default: 'Subscribe' }}</span>
        </button>
      </div>
      {% if privacy_link != blank %}
        <p class="mt-4 text-sm opacity-70">
          {{ privacy_text }} <a href="{{ privacy_link }}" class="font-semibold underline hover:no-underline">{{ privacy_link_text }}</a>.
        </p>
      {% endif %}
      {% if form.posted_successfully? %}
        <p class="mt-4 text-sm text-green-600">{{ 'general.newsletter.success' | t }}</p>
      {% endif %}
      {% if form.errors %}
        <p class="mt-4 text-sm text-red-500">{{ form.errors.messages['email'] }}</p>
      {% endif %}
    {% endform %}
    </div>
  </div>
</div>
