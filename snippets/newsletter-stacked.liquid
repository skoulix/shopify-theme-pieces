{%- comment -%}
  Newsletter Design 2: Stacked
  Title on top, form below (centered)
  Colors inherited from color scheme via CSS variables
{%- endcomment -%}

{%- assign container_class = container_class | default: 'page-container' -%}
<div class="newsletter-stacked bg-(--color-background) text-(--color-text)" data-tween-group="newsletter-stacked">
  <div class="{{ container_class }} text-center">
    {% if title != blank %}
      <h3 class="newsletter-title max-w-2xl mx-auto" data-tween data-tween-type="split-text">
        {{ title }}
      </h3>
    {% endif %}
    {% if text != blank %}
      <p class="mt-4 max-w-xl mx-auto text-base opacity-70" data-tween data-tween-type="fade-up">{{ text }}</p>
    {% endif %}
    <div class="mx-auto max-w-md" data-tween data-tween-type="fade-up">
    {% form 'customer', class: 'mt-10' %}
      <div class="flex gap-x-4">
        <label for="newsletter-email-stacked" class="sr-only">{{ 'customers.register.email' | t }}</label>
        <input
          id="newsletter-email-stacked"
          type="email"
          name="contact[email]"
          required
          placeholder="{{ 'customers.register.email' | t }}"
          autocomplete="email"
          class="input min-w-0 flex-auto placeholder:opacity-70 bg-transparent text-(--color-text) border-(--color-border)"
        >
        <input type="hidden" name="contact[tags]" value="newsletter">
        {%- liquid
          # Determine button class based on style + color combination
          # Style: solid or outline
          # Color: primary (accent) or secondary (neutral)
          if button_style == 'outline'
            if button_color == 'secondary'
              assign btn_class = 'btn--secondary'
            else
              assign btn_class = 'btn--outline'
            endif
          else
            if button_color == 'secondary'
              assign btn_class = 'btn--solid-secondary'
            else
              assign btn_class = 'btn--primary'
            endif
          endif
        -%}
        {%- assign btn_text = button_text | default: 'Subscribe' -%}
        <button type="submit" class="btn {{ btn_class }} flex-none">
          {% render 'button-text', text: btn_text %}
        </button>
      </div>
      {% if privacy_link != blank %}
        <p class="mt-4 text-sm opacity-70">
          {{ privacy_text }} <a href="{{ privacy_link }}" class="font-semibold underline hover:no-underline">{{ privacy_link_text }}</a>.
        </p>
      {% endif %}
      {% if form.posted_successfully? %}
        <p class="mt-4 text-sm text-green-600">{{ 'general.newsletter.success' | t }}</p>
      {% endif %}
      {% if form.errors %}
        <p class="mt-4 text-sm text-red-500">{{ form.errors.messages['email'] }}</p>
      {% endif %}
    {% endform %}
    </div>
  </div>
</div>
