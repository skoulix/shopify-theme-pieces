{%- comment -%}
  Breadcrumbs Navigation
  Renders visual breadcrumb navigation for improved UX and SEO

  Usage:
    {% render 'breadcrumbs' %}
    {% render 'breadcrumbs', separator: '/', show_home_icon: true %}

  Parameters:
    - separator: String - separator between items (default: '/')
    - show_home_icon: Boolean - show icon instead of text for home (default: false)
    - alignment: String - 'left', 'center', 'right' (default: 'left')

  Supports:
    - Products (with collection context)
    - Collections
    - Blog articles
    - Pages
    - Search results
{%- endcomment -%}

{%- liquid
  assign separator = separator | default: '/'
  assign show_home_icon = show_home_icon | default: false
  assign alignment = alignment | default: 'left'

  case alignment
    when 'center'
      assign align_class = 'justify-center'
    when 'right'
      assign align_class = 'justify-end'
    else
      assign align_class = 'justify-start'
  endcase
-%}

<nav class="breadcrumbs py-4" aria-label="Breadcrumb" data-tween data-tween-type="fade-up">
  <ol class="flex flex-wrap items-center gap-2 text-xs text-[--color-text-secondary] {{ align_class }}">
    {%- comment -%} Home {%- endcomment -%}
    <li class="breadcrumb-item">
      <a href="{{ routes.root_url }}" class="breadcrumb-link hover:text-[--color-text] transition-colors">
        {% if show_home_icon %}
          <i class="ph ph-house" aria-hidden="true"></i>
          <span class="sr-only">{{ 'general.breadcrumbs.home' | t | default: 'Home' }}</span>
        {% else %}
          {{ 'general.breadcrumbs.home' | t | default: 'Home' }}
        {% endif %}
      </a>
    </li>

    {%- comment -%} Template-specific breadcrumbs {%- endcomment -%}
    {% case template.name %}

      {% when 'product' %}
        {%- comment -%} Collection (if in collection context) {%- endcomment -%}
        {% if collection %}
          <li class="breadcrumb-separator text-[--color-text-secondary] opacity-50" aria-hidden="true">{{ separator }}</li>
          <li class="breadcrumb-item">
            <a href="{{ collection.url }}" class="breadcrumb-link hover:text-[--color-text] transition-colors">
              {{ collection.title }}
            </a>
          </li>
        {% elsif product.collections.size > 0 %}
          {%- assign primary_collection = product.collections | first -%}
          <li class="breadcrumb-separator text-[--color-text-secondary] opacity-50" aria-hidden="true">{{ separator }}</li>
          <li class="breadcrumb-item">
            <a href="{{ primary_collection.url }}" class="breadcrumb-link hover:text-[--color-text] transition-colors">
              {{ primary_collection.title }}
            </a>
          </li>
        {% endif %}
        {%- comment -%} Product {%- endcomment -%}
        <li class="breadcrumb-separator text-[--color-text-secondary] opacity-50" aria-hidden="true">{{ separator }}</li>
        <li class="breadcrumb-item">
          <span class="breadcrumb-current text-[--color-text] font-medium" aria-current="page">
            {{ product.title }}
          </span>
        </li>

      {% when 'collection' %}
        {%- comment -%} All Collections link (optional) {%- endcomment -%}
        {% if collection.handle != 'all' %}
          <li class="breadcrumb-separator text-[--color-text-secondary] opacity-50" aria-hidden="true">{{ separator }}</li>
          <li class="breadcrumb-item">
            <a href="{{ routes.collections_url }}" class="breadcrumb-link hover:text-[--color-text] transition-colors">
              {{ 'general.breadcrumbs.collections' | t | default: 'Collections' }}
            </a>
          </li>
        {% endif %}
        {%- comment -%} Current Collection {%- endcomment -%}
        <li class="breadcrumb-separator text-[--color-text-secondary] opacity-50" aria-hidden="true">{{ separator }}</li>
        <li class="breadcrumb-item">
          <span class="breadcrumb-current text-[--color-text] font-medium" aria-current="page">
            {{ collection.title }}
          </span>
        </li>

      {% when 'article' %}
        {%- comment -%} Blog {%- endcomment -%}
        <li class="breadcrumb-separator text-[--color-text-secondary] opacity-50" aria-hidden="true">{{ separator }}</li>
        <li class="breadcrumb-item">
          <a href="{{ blog.url }}" class="breadcrumb-link hover:text-[--color-text] transition-colors">
            {{ blog.title }}
          </a>
        </li>
        {%- comment -%} Article {%- endcomment -%}
        <li class="breadcrumb-separator text-[--color-text-secondary] opacity-50" aria-hidden="true">{{ separator }}</li>
        <li class="breadcrumb-item">
          <span class="breadcrumb-current text-[--color-text] font-medium" aria-current="page">
            {{ article.title }}
          </span>
        </li>

      {% when 'blog' %}
        {%- comment -%} Blog {%- endcomment -%}
        <li class="breadcrumb-separator text-[--color-text-secondary] opacity-50" aria-hidden="true">{{ separator }}</li>
        <li class="breadcrumb-item">
          <span class="breadcrumb-current text-[--color-text] font-medium" aria-current="page">
            {{ blog.title }}
          </span>
        </li>

      {% when 'page' %}
        {%- comment -%} Page {%- endcomment -%}
        <li class="breadcrumb-separator text-[--color-text-secondary] opacity-50" aria-hidden="true">{{ separator }}</li>
        <li class="breadcrumb-item">
          <span class="breadcrumb-current text-[--color-text] font-medium" aria-current="page">
            {{ page.title }}
          </span>
        </li>

      {% when 'search' %}
        {%- comment -%} Search {%- endcomment -%}
        <li class="breadcrumb-separator text-[--color-text-secondary] opacity-50" aria-hidden="true">{{ separator }}</li>
        <li class="breadcrumb-item">
          <span class="breadcrumb-current text-[--color-text] font-medium" aria-current="page">
            {{ 'general.breadcrumbs.search' | t | default: 'Search' }}
            {% if search.terms != blank %}
              : "{{ search.terms }}"
            {% endif %}
          </span>
        </li>

      {% when 'cart' %}
        {%- comment -%} Cart {%- endcomment -%}
        <li class="breadcrumb-separator text-[--color-text-secondary] opacity-50" aria-hidden="true">{{ separator }}</li>
        <li class="breadcrumb-item">
          <span class="breadcrumb-current text-[--color-text] font-medium" aria-current="page">
            {{ 'general.breadcrumbs.cart' | t | default: 'Cart' }}
          </span>
        </li>

      {% when 'list-collections' %}
        {%- comment -%} Collections List {%- endcomment -%}
        <li class="breadcrumb-separator text-[--color-text-secondary] opacity-50" aria-hidden="true">{{ separator }}</li>
        <li class="breadcrumb-item">
          <span class="breadcrumb-current text-[--color-text] font-medium" aria-current="page">
            {{ 'general.breadcrumbs.collections' | t | default: 'Collections' }}
          </span>
        </li>

    {% endcase %}
  </ol>
</nav>
