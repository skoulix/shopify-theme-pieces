import{P as i}from"./pieces-Piece.js";import"./pieces-app.js";class e extends i{constructor(){super("ShareButton",{stylesheets:[]})}mount(){var t;this.$shareButton=this.$("button")[0],this.$summary=this.$("summary")[0],this.$details=this.$("details")[0],this.$closeButton=this.$(".share-button__close")[0],this.$successMessage=this.$('[id^="ShareMessage"]')[0],this.$urlInput=this.$("input")[0],this.$copyButton=this.$(".share-button__copy")[0],this.urlToShare=((t=this.$urlInput)==null?void 0:t.value)||window.location.href,navigator.share?(this.$details&&this.$details.setAttribute("hidden",""),this.$shareButton&&(this.$shareButton.classList.remove("hidden"),this.on("click",this.$shareButton,this.nativeShare))):(this.$details&&this.on("toggle",this.$details,this.onToggle),this.$copyButton&&this.on("click",this.$copyButton,this.copyToClipboard),this.$closeButton&&this.on("click",this.$closeButton,this.close))}unmount(){navigator.share?this.$shareButton&&this.off("click",this.$shareButton,this.nativeShare):(this.$details&&this.off("toggle",this.$details,this.onToggle),this.$copyButton&&this.off("click",this.$copyButton,this.copyToClipboard),this.$closeButton&&this.off("click",this.$closeButton,this.close))}nativeShare(){navigator.share({url:this.urlToShare,title:document.title})}onToggle(){var t,s;(t=this.$details)!=null&&t.open||(this.$successMessage&&(this.$successMessage.classList.add("hidden"),this.$successMessage.textContent=""),this.$closeButton&&this.$closeButton.classList.add("hidden"),(s=this.$summary)==null||s.focus())}copyToClipboard(){this.$urlInput&&navigator.clipboard.writeText(this.$urlInput.value).then(()=>{var t;this.$successMessage&&(this.$successMessage.classList.remove("hidden"),this.$successMessage.textContent=((t=window.accessibilityStrings)==null?void 0:t.shareSuccess)||"Link copied!"),this.$closeButton&&(this.$closeButton.classList.remove("hidden"),this.$closeButton.focus())})}close(){this.$details&&(this.$details.open=!1),this.onToggle()}updateUrl(t){this.urlToShare=t,this.$urlInput&&(this.$urlInput.value=t)}}customElements.define("share-button",e);export{e as default};
//# sourceMappingURL=pieces-ShareButton.js.map
