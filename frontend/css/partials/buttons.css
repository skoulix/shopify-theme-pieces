/* ==========================================================================
   Button System
   Variants: primary | secondary | outline | tertiary (ghost)
   Sizes:    sm | md (default) | lg | icon
   ========================================================================== */

@layer components {
  /* Base Button */
  .btn {
    @apply relative inline-flex items-center justify-center gap-2 h-11 px-7
           text-xs font-semibold leading-none
           rounded-(--button-radius) shadow-(--button-shadow)
           overflow-hidden no-underline whitespace-nowrap
           transition-[color,border-color,box-shadow] duration-200;
    letter-spacing: var(--button-letter-spacing, 0.1em);
  }

  .btn:hover {
    @apply shadow-(--button-shadow-hover);
  }

  .btn span, .btn i, .btn svg, .btn > * {
    @apply relative z-10;
  }

  .btn::before {
    @apply absolute z-0 inset-0 scale-x-0 origin-right
           transition-transform duration-300 content-[''];
  }

  .btn:hover::before {
    @apply scale-x-100 origin-left;
  }

  /* Primary */
  .btn--primary {
    @apply bg-(--color-primary) border border-(--color-primary);
    color: var(--color-primary-contrast) !important;
  }

  .btn--primary::before {
    @apply bg-(--color-primary-contrast);
  }

  .btn--primary span, .btn--primary i, .btn--primary svg, .btn--primary > * {
    @apply transition-colors duration-200 delay-100;
    color: var(--color-primary-contrast) !important;
  }

  .btn--primary:hover {
    color: var(--color-primary) !important;
  }

  .btn--primary:hover span, .btn--primary:hover i, .btn--primary:hover svg, .btn--primary:hover > * {
    color: var(--color-primary) !important;
  }

  .btn--primary:not(:hover) span, .btn--primary:not(:hover) i, .btn--primary:not(:hover) svg, .btn--primary:not(:hover) > * {
    @apply delay-0;
    color: var(--color-primary-contrast) !important;
  }

  /* Secondary */
  .btn--secondary {
    @apply text-(--color-text) bg-transparent border border-(--color-text);
  }

  .btn--secondary::before {
    @apply bg-(--color-text);
  }

  .btn--secondary span, .btn--secondary i, .btn--secondary svg, .btn--secondary > * {
    @apply text-(--color-text) transition-colors duration-200 delay-100;
  }

  .btn--secondary:hover {
    @apply text-(--color-background) border-(--color-text);
  }

  .btn--secondary:hover span, .btn--secondary:hover i, .btn--secondary:hover svg, .btn--secondary:hover > * {
    @apply text-(--color-background);
  }

  .btn--secondary:not(:hover) span, .btn--secondary:not(:hover) i, .btn--secondary:not(:hover) svg, .btn--secondary:not(:hover) > * {
    @apply text-(--color-text) delay-0;
  }

  /* Outline */
  .btn--outline {
    @apply text-(--color-primary) bg-transparent border border-(--color-primary);
  }

  .btn--outline::before {
    @apply bg-(--color-primary);
  }

  .btn--outline span, .btn--outline i, .btn--outline svg, .btn--outline > * {
    @apply transition-colors duration-200 delay-100;
  }

  .btn--outline:hover {
    @apply text-(--color-primary-contrast);
  }

  .btn--outline:hover span, .btn--outline:hover i, .btn--outline:hover svg, .btn--outline:hover > * {
    @apply text-(--color-primary-contrast);
  }

  .btn--outline:not(:hover) span, .btn--outline:not(:hover) i, .btn--outline:not(:hover) svg, .btn--outline:not(:hover) > * {
    @apply delay-0;
  }

  /* Solid Secondary */
  .btn--solid-secondary {
    @apply text-(--color-background) bg-(--color-text) border border-(--color-text);
  }

  .btn--solid-secondary::before {
    @apply bg-(--color-background);
  }

  .btn--solid-secondary span, .btn--solid-secondary i, .btn--solid-secondary svg, .btn--solid-secondary > * {
    @apply transition-colors duration-200 delay-100;
  }

  .btn--solid-secondary:hover {
    @apply text-(--color-text);
  }

  .btn--solid-secondary:hover span, .btn--solid-secondary:hover i, .btn--solid-secondary:hover svg, .btn--solid-secondary:hover > * {
    @apply text-(--color-text);
  }

  .btn--solid-secondary:not(:hover) span, .btn--solid-secondary:not(:hover) i, .btn--solid-secondary:not(:hover) svg, .btn--solid-secondary:not(:hover) > * {
    @apply delay-0;
  }

  /* Tertiary (Ghost) */
  .btn--tertiary {
    @apply text-(--color-text) bg-transparent border border-transparent shadow-none;
  }

  .btn--tertiary::before {
    @apply bg-(--color-text) opacity-5;
  }

  .btn--tertiary:hover {
    @apply text-(--color-text);
  }

  /* Sizes */
  .btn--xs {
    @apply h-8 px-4 text-xs;
  }

  .btn--sm {
    @apply h-10 px-5 text-xs;
  }

  .btn--md {
    @apply h-11;
  }

  .btn--lg {
    @apply h-14 px-9 text-sm;
  }

  .btn--icon {
    @apply aspect-square p-3;
  }

  .btn--icon.btn--sm {
    @apply p-2;
  }

  .btn--icon.btn--lg {
    @apply p-4;
  }

  /* Layout */
  .btn--full {
    @apply w-full;
  }

  .btn--rounded {
    @apply rounded-full;
  }

  /* ==========================================================================
     Share Button - Social share icons
     Used in: article share buttons
     ========================================================================== */

  .share-btn {
    @apply size-10 flex items-center justify-center border;
    border-color: var(--color-border);
    border-radius: var(--button-radius);
    color: var(--color-text);
    transition: all var(--transition-base);
  }

  .share-btn:hover {
    background-color: var(--color-primary);
    border-color: var(--color-primary);
    color: var(--color-primary-contrast);
  }

  /* States */
  .btn:disabled, .btn[disabled], .btn.is-disabled {
    @apply cursor-not-allowed pointer-events-none opacity-50;
  }

  .btn.is-loading {
    @apply pointer-events-none text-transparent!;
  }

  .btn.is-loading::after {
    @apply absolute z-20 rounded-full size-4 border-2 border-current border-r-transparent animate-spin content-[''];
  }

  .btn--primary.is-loading::after {
    @apply border-(--color-primary-contrast) border-r-transparent;
  }

  .btn--secondary.is-loading::after, .btn--tertiary.is-loading::after {
    @apply border-(--color-text) border-r-transparent;
  }

  .btn--outline.is-loading::after {
    @apply border-(--color-primary) border-r-transparent;
  }

  /* Section Variants */
  .btn--section {
    color: var(--section-text, var(--color-text));
    border-color: color-mix(in srgb, var(--section-text, var(--color-text)) 30%, transparent);
  }

  .btn--section::before {
    background: var(--section-text, var(--color-text));
  }

  .btn--section:hover {
    color: var(--section-bg, var(--color-background));
    border-color: var(--section-text, var(--color-text));
  }

  .btn--section:hover span, .btn--section:hover i, .btn--section:hover svg, .btn--section:hover > * {
    color: var(--section-bg, var(--color-background));
  }

  /* ==========================================================================
     Link CTA - Text links with arrow and slide-up hover effect
     Used in: featured-collection, featured-blog, image-with-text, text-reveal
     Usage: <a class="link-cta"><span class="link-cta-text"><span data-hover="Text">Text</span></span><i class="ph ph-arrow-right"></i></a>
     ========================================================================== */

  .link-cta {
    @apply inline-flex items-center gap-3 no-underline text-sm font-semibold;
    letter-spacing: 0.1em;
  }

  .link-cta-text {
    @apply inline-block overflow-hidden;
  }

  .link-cta-text span[data-hover] {
    @apply inline-block relative transition-transform duration-200;
  }

  .link-cta-text span[data-hover]::after {
    @apply absolute left-0 top-full whitespace-nowrap content-[attr(data-hover)];
  }

  .link-cta:hover .link-cta-text span[data-hover] {
    @apply -translate-y-full;
  }

  /* ==========================================================================
     Arrow Link - Small navigation links with icon (back, prev, next)
     Used in: article nav, account back links, breadcrumb-style navigation
     ========================================================================== */

  .arrow-link {
    @apply inline-flex items-center gap-2 text-xs font-semibold tracking-widest overflow-hidden;
    color: var(--color-text-secondary);
  }

  .arrow-link span[data-hover] {
    @apply inline-block relative transition-transform duration-200;
  }

  .arrow-link span[data-hover]::after {
    @apply absolute left-0 top-full content-[attr(data-hover)];
  }

  .arrow-link:hover span[data-hover],
  .group:hover .arrow-link span[data-hover] {
    @apply -translate-y-full;
  }

  .arrow-link--uppercase {
    @apply uppercase;
  }

  /* Text Hover Reveal - Generic hover effect for any element */
  .text-hover-reveal {
    @apply overflow-hidden;
  }

  .text-hover-reveal span {
    @apply inline-block relative transition-transform duration-200;
  }

  .text-hover-reveal span::after {
    @apply absolute left-0 top-full content-[attr(data-hover)];
  }

  .text-hover-reveal:hover span {
    @apply -translate-y-full;
  }

  /* ==========================================================================
     Card Action Button - Product card icon buttons (quick view, wishlist, compare)
     Used in: product-card, collection metro items
     ========================================================================== */

  .card-action-btn {
    @apply size-10 flex items-center justify-center rounded-full shadow-md
           transform scale-90 transition-all duration-300;
    background-color: var(--color-background);
    color: var(--color-text);
  }

  .card-action-btn:hover {
    background-color: var(--color-text);
    color: var(--color-background);
  }

  .group:hover .card-action-btn {
    @apply scale-100;
  }

  /* Wishlist active state */
  .card-action-btn[data-wishlist-toggle].is-active {
    background-color: var(--color-sale);
    color: white;
  }

  /* Compare active state */
  .card-action-btn[data-compare-toggle].is-active {
    background-color: var(--color-text);
    color: var(--color-background);
  }

  /* ==========================================================================
     Drawer Close Button - Close buttons in slide-out drawers
     Used in: cart-drawer, search-drawer, facets drawer, mobile menu
     ========================================================================== */

  .drawer-close {
    @apply flex items-center justify-center size-10 -m-2 ml-auto
           bg-transparent border-none;
    color: var(--color-text);
    transition: opacity var(--transition-fast);
  }

  .drawer-close:hover {
    @apply opacity-60;
  }

  .drawer-close:focus-visible {
    @apply outline-2 outline-offset-2 outline-(--color-primary);
  }

  /* Size variants */
  .drawer-close--lg {
    @apply size-12 -m-3;
  }

  /* ==========================================================================
     Modal Close Button - Close buttons in modals/popups
     Used in: quick-view-modal, newsletter-popup, age-gate
     ========================================================================== */

  .modal-close {
    @apply absolute top-4 right-4 z-10 size-10 flex items-center justify-center
           rounded-full transition-transform duration-200;
    background-color: var(--color-text);
    color: var(--color-background);
  }

  .modal-close:hover {
    @apply scale-110 opacity-90;
  }

  .modal-close:focus-visible {
    @apply outline-2 outline-offset-2 outline-(--color-primary);
  }

  /* ==========================================================================
     Drawer Backdrop - Overlay for drawers and modals
     Used in: cart-drawer, search-drawer, mobile-menu, quick-view-modal
     ========================================================================== */

  .drawer-backdrop {
    @apply fixed inset-0 opacity-0 transition-opacity duration-300;
    background-color: rgba(0, 0, 0, 0.5);
    backdrop-filter: blur(4px);
    -webkit-backdrop-filter: blur(4px);
  }

  .group.is-open .drawer-backdrop,
  .group[class*="is-open"] .drawer-backdrop {
    @apply opacity-100;
  }

  /* ==========================================================================
     Remove Item Button - Small icon buttons for removing items
     Used in: cart-drawer, cart page
     ========================================================================== */

  .remove-btn {
    @apply flex items-center justify-center size-8 bg-transparent border-none;
    color: var(--color-text-secondary);
    transition: color var(--transition-fast);
  }

  .remove-btn:hover {
    color: var(--color-sale);
  }

  .remove-btn:focus-visible {
    @apply outline-2 outline-offset-2 outline-(--color-primary);
  }
}
