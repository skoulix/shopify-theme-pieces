/* ==========================================================================
   Button System
   Variants: primary | secondary | outline | tertiary (ghost)
   Sizes:    sm | md (default) | lg | icon
   ========================================================================== */

@layer components {
  /* Base Button */
  .btn {
    @apply relative inline-flex items-center justify-center gap-2 h-11 px-7
           text-xs font-semibold tracking-widest leading-none
           rounded-(--button-radius) shadow-(--button-shadow)
           cursor-pointer overflow-hidden no-underline whitespace-nowrap
           transition-[color,border-color,box-shadow] duration-200;
  }

  .btn:hover {
    @apply shadow-(--button-shadow-hover);
  }

  .btn span, .btn i, .btn svg, .btn > * {
    @apply relative z-10;
  }

  .btn::before {
    @apply absolute z-0 inset-0 scale-x-0 origin-right
           transition-transform duration-300 content-[''];
  }

  .btn:hover::before {
    @apply scale-x-100 origin-left;
  }

  /* Primary */
  .btn--primary {
    @apply bg-(--color-primary) border border-(--color-primary);
    color: var(--color-primary-contrast) !important;
  }

  .btn--primary::before {
    @apply bg-(--color-primary-contrast);
  }

  .btn--primary span, .btn--primary i, .btn--primary svg, .btn--primary > * {
    @apply transition-colors duration-200 delay-100;
    color: var(--color-primary-contrast) !important;
  }

  .btn--primary:hover {
    color: var(--color-primary) !important;
  }

  .btn--primary:hover span, .btn--primary:hover i, .btn--primary:hover svg, .btn--primary:hover > * {
    color: var(--color-primary) !important;
  }

  .btn--primary:not(:hover) span, .btn--primary:not(:hover) i, .btn--primary:not(:hover) svg, .btn--primary:not(:hover) > * {
    @apply delay-0;
    color: var(--color-primary-contrast) !important;
  }

  /* Secondary */
  .btn--secondary {
    @apply text-(--color-text) bg-transparent border border-(--color-text);
  }

  .btn--secondary::before {
    @apply bg-(--color-text);
  }

  .btn--secondary span, .btn--secondary i, .btn--secondary svg, .btn--secondary > * {
    @apply text-(--color-text) transition-colors duration-200 delay-100;
  }

  .btn--secondary:hover {
    @apply text-(--color-background) border-(--color-text);
  }

  .btn--secondary:hover span, .btn--secondary:hover i, .btn--secondary:hover svg, .btn--secondary:hover > * {
    @apply text-(--color-background);
  }

  .btn--secondary:not(:hover) span, .btn--secondary:not(:hover) i, .btn--secondary:not(:hover) svg, .btn--secondary:not(:hover) > * {
    @apply text-(--color-text) delay-0;
  }

  /* Outline */
  .btn--outline {
    @apply text-(--color-primary) bg-transparent border border-(--color-primary);
  }

  .btn--outline::before {
    @apply bg-(--color-primary);
  }

  .btn--outline span, .btn--outline i, .btn--outline svg, .btn--outline > * {
    @apply transition-colors duration-200 delay-100;
  }

  .btn--outline:hover {
    @apply text-(--color-primary-contrast);
  }

  .btn--outline:hover span, .btn--outline:hover i, .btn--outline:hover svg, .btn--outline:hover > * {
    @apply text-(--color-primary-contrast);
  }

  .btn--outline:not(:hover) span, .btn--outline:not(:hover) i, .btn--outline:not(:hover) svg, .btn--outline:not(:hover) > * {
    @apply delay-0;
  }

  /* Solid Secondary */
  .btn--solid-secondary {
    @apply text-(--color-background) bg-(--color-text) border border-(--color-text);
  }

  .btn--solid-secondary::before {
    @apply bg-(--color-background);
  }

  .btn--solid-secondary span, .btn--solid-secondary i, .btn--solid-secondary svg, .btn--solid-secondary > * {
    @apply transition-colors duration-200 delay-100;
  }

  .btn--solid-secondary:hover {
    @apply text-(--color-text);
  }

  .btn--solid-secondary:hover span, .btn--solid-secondary:hover i, .btn--solid-secondary:hover svg, .btn--solid-secondary:hover > * {
    @apply text-(--color-text);
  }

  .btn--solid-secondary:not(:hover) span, .btn--solid-secondary:not(:hover) i, .btn--solid-secondary:not(:hover) svg, .btn--solid-secondary:not(:hover) > * {
    @apply delay-0;
  }

  /* Tertiary (Ghost) */
  .btn--tertiary {
    @apply text-(--color-text) bg-transparent border border-transparent shadow-none;
  }

  .btn--tertiary::before {
    @apply bg-(--color-text) opacity-5;
  }

  .btn--tertiary:hover {
    @apply text-(--color-text);
  }

  /* Sizes */
  .btn--xs {
    @apply h-8 px-4 text-xs tracking-wide;
  }

  .btn--sm {
    @apply h-10 px-5 text-xs tracking-wider;
  }

  .btn--md {
    @apply h-11;
  }

  .btn--lg {
    @apply h-14 px-9 text-sm;
  }

  .btn--icon {
    @apply aspect-square p-3;
  }

  .btn--icon.btn--sm {
    @apply p-2;
  }

  .btn--icon.btn--lg {
    @apply p-4;
  }

  /* Layout */
  .btn--full {
    @apply w-full;
  }

  .btn--rounded {
    @apply rounded-full;
  }

  /* States */
  .btn:disabled, .btn[disabled], .btn.is-disabled {
    @apply cursor-not-allowed pointer-events-none opacity-50;
  }

  .btn.is-loading {
    @apply pointer-events-none text-transparent!;
  }

  .btn.is-loading::after {
    @apply absolute z-20 rounded-full size-4 border-2 border-current border-r-transparent animate-spin content-[''];
  }

  .btn--primary.is-loading::after {
    @apply border-(--color-primary-contrast) border-r-transparent;
  }

  .btn--secondary.is-loading::after, .btn--tertiary.is-loading::after {
    @apply border-(--color-text) border-r-transparent;
  }

  .btn--outline.is-loading::after {
    @apply border-(--color-primary) border-r-transparent;
  }

  /* Section Variants */
  .btn--section {
    color: var(--section-text, var(--color-text));
    border-color: color-mix(in srgb, var(--section-text, var(--color-text)) 30%, transparent);
  }

  .btn--section::before {
    background: var(--section-text, var(--color-text));
  }

  .btn--section:hover {
    color: var(--section-bg, var(--color-background));
    border-color: var(--section-text, var(--color-text));
  }

  .btn--section:hover span, .btn--section:hover i, .btn--section:hover svg, .btn--section:hover > * {
    color: var(--section-bg, var(--color-background));
  }

  /* Link CTA */
  .link-cta {
    @apply inline-flex items-center gap-3 no-underline text-xs font-semibold tracking-widest;
  }

  /* Text Hover Reveal */
  .text-hover-reveal {
    @apply overflow-hidden;
  }

  .text-hover-reveal span {
    @apply inline-block relative transition-transform duration-200;
  }

  .text-hover-reveal span::after {
    @apply absolute left-0 top-full content-[attr(data-hover)];
  }

  .text-hover-reveal:hover span {
    @apply -translate-y-full;
  }

  .link-cta--reveal {
    @apply overflow-hidden;
  }

  .link-cta--reveal .link-cta-text {
    @apply inline-block relative transition-transform duration-200;
  }

  .link-cta--reveal .link-cta-text::after {
    @apply absolute left-0 top-full content-[attr(data-hover)];
  }

  .link-cta--reveal:hover .link-cta-text {
    @apply -translate-y-full;
  }
}
