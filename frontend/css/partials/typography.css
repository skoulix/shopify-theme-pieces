/* ==========================================================================
   Typography - Reusable text styles
   ========================================================================== */

@layer components {
  /* ==========================================================================
     Page Title - Large page headers
     Used in: collection, blog, cart, search, page, contact-form, wishlist, compare
     ========================================================================== */

  .page-title {
    @apply font-heading leading-tight text-balance lg:text-[calc(clamp(2.5rem,4vw,3.5rem)*var(--heading-font-scale,1))] 2xl:text-[calc(clamp(3rem,3.5vw,4rem)*var(--heading-font-scale,1))];
    font-weight: var(--font-heading-weight, 700);
    letter-spacing: calc(-0.03em + var(--heading-letter-spacing, 0em));
    font-size: calc(clamp(1.75rem, 5vw, 2.75rem) * var(--heading-font-scale, 1));
  }

  /* ==========================================================================
     Section Title - Large responsive heading with font scale support
     Used in: hero, countdown, collections, shoppable-videos, hotspots,
     floating-images, stacking-cards, rolling-numbers, FAQ, testimonials, etc.
     ========================================================================== */

  .section-title {
    @apply font-heading leading-tight text-balance lg:text-[calc(clamp(2rem,3vw,2.75rem)*var(--heading-font-scale,1))] 2xl:text-[calc(clamp(2.25rem,2.5vw,3rem)*var(--heading-font-scale,1))];
    font-weight: var(--font-heading-weight, 700);
    letter-spacing: calc(-0.02em + var(--heading-letter-spacing, 0em));
    font-size: calc(clamp(1.5rem, 4vw, 2.25rem) * var(--heading-font-scale, 1));
  }

  /* Hero title - primary hero headline (larger than page-title) */
  .hero-title {
    @apply font-heading leading-none text-balance lg:text-[calc(clamp(3rem,6vw,5rem)*var(--heading-font-scale,1))] 2xl:text-[calc(clamp(4rem,5vw,6rem)*var(--heading-font-scale,1))];
    font-weight: var(--font-heading-weight, 700);
    letter-spacing: calc(-0.03em + var(--heading-letter-spacing, 0em));
    font-size: calc(clamp(2rem, 8vw, 3.5rem) * var(--heading-font-scale, 1));
  }

  /* Newsletter title (h3) */
  .newsletter-title {
    @apply font-heading leading-snug text-balance lg:text-[calc(clamp(1.25rem,2vw,1.75rem)*var(--heading-font-scale,1))];
    font-weight: var(--font-heading-weight, 700);
    letter-spacing: calc(-0.02em + var(--heading-letter-spacing, 0em));
    font-size: calc(clamp(1.125rem, 2.5vw, 1.5rem) * var(--heading-font-scale, 1));
  }

  /* Blog card title */
  .blog-card-title {
    @apply font-heading leading-snug;
    font-weight: var(--font-heading-weight, 700);
    letter-spacing: calc(-0.015em + var(--heading-letter-spacing, 0em));
    font-size: calc(clamp(0.9375rem, 1.5vw, 1.125rem) * var(--heading-font-scale, 1));
  }

  /* Featured blog card - larger title */
  .blog-card-title--featured {
    @apply font-heading leading-snug;
    font-weight: var(--font-heading-weight, 700);
    letter-spacing: calc(-0.02em + var(--heading-letter-spacing, 0em));
    font-size: calc(clamp(1.25rem, 2.5vw, 1.75rem) * var(--heading-font-scale, 1));
  }

  /* Title line offsets for SplitText animations */
  .section-title-line:nth-child(2) {
    margin-left: clamp(0.5rem, 4vw, 2rem);
  }

  .section-title-line:nth-child(3) {
    margin-left: clamp(1rem, 8vw, 4rem);
  }

  /* ==========================================================================
     Section Header Spacing - Consistent vertical rhythm
     Usage: Wrap label, title, description, cta in a container with these classes

     Example:
     <div class="section-header">
       <span class="section-label">Label</span>
       <h2 class="section-title">Title</h2>
       <p class="section-description">Description</p>
       <a class="section-cta btn btn--primary">Button</a>
     </div>
     ========================================================================== */

  .section-header {
    margin-bottom: clamp(2rem, 5vh, 4rem) !important;
  }

  /* Reset spacing for elements inside .section-header since base classes now include spacing */
  .section-header .section-title {
    @apply mb-0;
  }

  .section-header .section-cta,
  .section-header .btn {
    margin-top: clamp(1.5rem, 3vw, 2.5rem) !important;
  }

  /* ==========================================================================
     Section Label - Small uppercase eyebrow text
     Includes default spacing (margin-bottom) for consistent rhythm
     ========================================================================== */

  .section-label {
    @apply inline-block text-sm font-semibold tracking-widest text-(--color-text-secondary);
    margin-bottom: clamp(1rem, 2vw, 1.5rem) !important;
  }

  /* No spacing variant */
  .section-label--inline {
    margin-bottom: 0 !important;
  }

  /* ==========================================================================
     Blog Category - Category label for blog cards/items
     ========================================================================== */

  .blog-category {
    @apply text-xs font-semibold tracking-wider text-(--color-text-secondary);
    margin-bottom: 0.5rem !important;
  }

  /* ==========================================================================
     Section Description - Paragraph text below title
     Includes default spacing (margin-top) for consistent rhythm
     ========================================================================== */

  .section-description {
    @apply font-body leading-loose max-w-prose;
    font-size: calc(clamp(0.875rem, 1.5vw, 1.125rem) * var(--body-font-scale, 1));
    letter-spacing: var(--body-letter-spacing, 0);
    opacity: var(--opacity-muted);
    margin-top: clamp(1.25rem, 2.5vw, 1.75rem) !important;
  }

  /* Centered variant */
  .section-description--centered {
    @apply mx-auto text-center;
  }

  /* ==========================================================================
     Section CTA - Button/link after description
     Includes default spacing (margin-top) for consistent rhythm
     ========================================================================== */

  .section-cta {
    margin-top: clamp(1.5rem, 3vw, 2.5rem) !important;
  }

  /* ==========================================================================
     Page Header Subtitle - Reusable pattern for collection/blog headers
     Usage: <p class="page-header-subtitle">
              <span class="page-header-subtitle-line" data-subtitle-line></span>
              <span class="overflow-hidden"><span class="inline-block" data-subtitle-text>Text</span></span>
            </p>
     ========================================================================== */

  .page-header-subtitle {
    @apply flex items-center gap-4 text-xs font-semibold tracking-widest;
    margin-top: 1.5rem !important;
    color: var(--color-text-secondary);
  }

  /* Alignment variants for flex subtitle */
  .text-center .page-header-subtitle {
    @apply justify-center;
  }

  .text-right .page-header-subtitle {
    @apply justify-end;
  }

  .page-header-subtitle-line {
    @apply w-12 h-px bg-current opacity-60;
    /* Initial scaleX(0) handled by TweenManager for animated pages */
    /* For non-animated contexts, line shows by default */
  }

  /* ==========================================================================
     Stat Number - Large display numbers for counters
     Used in: countdown, rolling-numbers
     ========================================================================== */

  .stat-number {
    @apply font-heading leading-none;
    font-weight: var(--font-heading-weight, 700);
    font-size: calc(clamp(3rem, 8vw, 5rem) * var(--heading-font-scale, 1));
    letter-spacing: calc(-0.02em + var(--heading-letter-spacing, 0em));
  }

  /* ==========================================================================
     Form Label - Input/field labels
     Used in: contact-form, product variant pickers, filters
     ========================================================================== */

  .form-label {
    @apply block text-sm font-semibold tracking-widest;
    margin-bottom: 0.75rem !important;
    color: var(--color-text-secondary);
  }

  /* ==========================================================================
     Card Title - Product cards, blog cards, collection cards
     ========================================================================== */

  .card-title {
    @apply font-heading font-semibold leading-snug md:text-[calc(1.0625rem*var(--heading-font-scale,1))];
    letter-spacing: calc(0.01em + var(--heading-letter-spacing, 0em));
    font-size: calc(0.9375rem * var(--heading-font-scale, 1));
    color: var(--color-text);
  }

  /* ==========================================================================
     Card Meta - Vendor, category, date, counts
     ========================================================================== */

  .card-meta {
    @apply text-xs font-medium tracking-wider;
    color: var(--color-text-secondary);
  }

  /* ==========================================================================
     Card Price - Product/item pricing display
     ========================================================================== */

  .card-price {
    @apply font-body text-sm font-medium;
    margin-top: 0.5rem !important;
    color: var(--color-text-secondary);
  }

  .card-price--sale {
    color: var(--color-sale);
  }

  .card-price--compare {
    @apply line-through mr-2;
    opacity: var(--opacity-secondary);
  }

  /* ==========================================================================
     Quote Text - Testimonials, blockquotes
     ========================================================================== */

  .quote-text {
    @apply font-body leading-relaxed italic;
    font-size: calc(clamp(1.125rem, 2vw, 1.5rem) * var(--body-font-scale, 1));
    letter-spacing: var(--body-letter-spacing, 0);
  }

  /* ==========================================================================
     FAQ Question - Accordion question text
     ========================================================================== */

  .faq-question {
    @apply font-heading font-medium leading-snug;
    font-size: calc(clamp(1rem, 2vw, 1.25rem) * var(--heading-font-scale, 1));
    letter-spacing: calc(-0.01em + var(--heading-letter-spacing, 0em));
  }

  /* ==========================================================================
     Drawer Title - Slide-out drawer headings
     Used in: cart-drawer, search-drawer, facets drawer
     ========================================================================== */

  .drawer-title {
    @apply font-heading leading-snug;
    font-weight: var(--font-heading-weight, 700);
    font-size: calc(1.125rem * var(--heading-font-scale, 1));
    letter-spacing: calc(-0.01em + var(--heading-letter-spacing, 0em));
  }

  /* ==========================================================================
     Popup Title - Modal/popup headings
     Used in: newsletter-popup, quick-view, age-gate
     ========================================================================== */

  .popup-title {
    @apply font-heading leading-snug;
    font-weight: var(--font-heading-weight, 700);
    font-size: calc(1.5rem * var(--heading-font-scale, 1));
    letter-spacing: calc(-0.02em + var(--heading-letter-spacing, 0em));
  }

  /* ==========================================================================
     Footer Brand - Shop name in footer when no logo
     ========================================================================== */

  .footer-brand {
    @apply font-heading leading-tight;
    font-weight: var(--font-heading-weight, 700);
    font-size: calc(1.25rem * var(--heading-font-scale, 1));
    letter-spacing: calc(-0.01em + var(--heading-letter-spacing, 0em));
  }

  /* ==========================================================================
     Badge - Sale tags, labels, status indicators
     ========================================================================== */

  .badge {
    @apply inline-block py-1 px-2 text-xs font-semibold tracking-wider;
    border-radius: var(--badge-radius, 0.25rem);
  }

  .badge--sale {
    @apply text-white;
    background-color: var(--color-sale);
  }

  .badge--soldout {
    background-color: var(--color-text);
    color: var(--color-background);
  }

  .badge--new {
    @apply text-white;
    background-color: var(--color-primary);
  }

  /* ==========================================================================
     Text Utilities
     ========================================================================== */

  /* Note: Typography utility classes (.text-label, .text-label-sm, .text-meta,
     .text-link-sm, .text-counter) are defined in css-variables.liquid to respect
     the theme's buttons_uppercase setting */

  /* Note: text-balance and text-pretty are native in Tailwind v3.4+ */

  /* ==========================================================================
     Spacing Utilities - Override utilities for special cases
     NOTE: .section-label, .section-description, .section-cta now have
     built-in spacing. Use these only when you need to override defaults.
     ========================================================================== */

  /* Remove default spacing when needed */
  .spacing-none {
    @apply my-0;
  }

  /* Spacing for section content below header */
  .spacing-content {
    margin-top: clamp(2rem, 5vh, 4rem) !important;
  }

  /* ==========================================================================
     Section Header Container Spacing
     Standardizes the gap between header (label/title/description) and content
     Used in: featured-collection, testimonials, featured-blog, collections, etc.
     ========================================================================== */

  .section-header-spacing {
    @apply lg:mb-[clamp(2.5rem,4vw,4rem)];
    margin-bottom: clamp(2rem, 4vw, 3rem) !important;
  }

  /* ==========================================================================
     Icon Button - Circular icon buttons with hover states
     Used in: navigation arrows, close buttons, toggle buttons
     ========================================================================== */

  .icon-btn {
    @apply flex items-center justify-center size-10 rounded-full bg-transparent cursor-pointer;
    border: 1px solid var(--color-border);
    color: var(--color-text);
    transition: background-color var(--transition-fast), color var(--transition-fast), border-color var(--transition-fast);
  }

  .icon-btn:hover {
    background-color: var(--color-text);
    border-color: var(--color-text);
    color: var(--color-background);
  }

  .icon-btn:focus-visible {
    @apply outline-2 outline-offset-2 outline-(--color-primary);
  }

  .icon-btn:disabled {
    @apply cursor-not-allowed;
    opacity: var(--opacity-subtle);
  }

  .icon-btn:disabled:hover {
    @apply bg-transparent;
    color: var(--color-text);
    border-color: var(--color-border);
  }

  /* Size variants */
  .icon-btn--sm {
    @apply size-8;
  }

  .icon-btn--lg {
    @apply size-12;
  }

  /* ==========================================================================
     Image Hover Effects
     Common hover states for media elements
     ========================================================================== */

  .image-zoom-hover {
    @apply overflow-hidden;
  }

  .image-zoom-hover img,
  .image-zoom-hover video {
    transition: transform var(--transition-slow);
  }

  .image-zoom-hover:hover img,
  .image-zoom-hover:hover video {
    @apply scale-105;
  }

  /* ==========================================================================
     Overlay Hover - Show content on hover
     Used for: product quick actions, card overlays
     ========================================================================== */

  .overlay-on-hover {
    @apply opacity-0;
    transition: opacity var(--transition-base);
  }

  .group:hover .overlay-on-hover,
  .overlay-on-hover:hover {
    @apply opacity-100;
  }

  /* ==========================================================================
     Image Hover Swap - Secondary image reveals on hover
     Used in: product-card, collection metro items
     Wrap images in a container with group class, primary gets .image-primary,
     secondary gets .image-secondary
     ========================================================================== */

  .image-primary {
    @apply w-full h-full object-cover scale-100;
    transition: scale var(--transition-slow), opacity var(--transition-slow);
  }

  .group:hover .image-primary.has-secondary {
    @apply scale-105 opacity-0;
  }

  .group:hover .image-primary:not(.has-secondary) {
    @apply scale-105;
  }

  .image-secondary {
    @apply absolute inset-0 w-full h-full object-cover scale-100 opacity-0;
    transition: scale var(--transition-slow), opacity var(--transition-slow);
  }

  .group:hover .image-secondary {
    @apply scale-105 opacity-100;
  }
}
