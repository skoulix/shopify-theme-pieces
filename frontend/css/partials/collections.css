/* Collections List Page Styles */
@layer components {
  /* Collections wrapper loading state */
  .collections-wrapper.is-loading [data-collections-title] {
    @apply opacity-0;
  }

  html.animations-disabled .collections-wrapper.is-loading [data-collections-title] {
    @apply opacity-100;
  }

  .collections-wrapper.is-loading .collection-card-image {
    clip-path: inset(0 100% 0 0);
  }

  html.animations-disabled .collections-wrapper.is-loading .collection-card-image {
    clip-path: none;
  }

  .collections-wrapper.is-loading .collections-metro-item-inner {
    clip-path: inset(0 100% 0 0);
  }

  html.animations-disabled .collections-wrapper.is-loading .collections-metro-item-inner {
    clip-path: none;
  }

  /* Grid layout */
  .collections-grid {
    grid-template-columns: repeat(var(--columns-mobile, 1), 1fr);
    @apply md:grid-cols-[repeat(var(--columns-tablet,2),1fr)] lg:grid-cols-[repeat(var(--columns-desktop,3),1fr)];
  }

  /* Collection card */
  .collection-card {
    @apply relative overflow-hidden;
  }

  .collection-card-image {
    @apply relative overflow-hidden bg-(--color-background-secondary);
    aspect-ratio: 4/5;
  }

  .collection-card-image img {
    @apply w-full h-full object-cover transition-transform duration-800 ease-[cubic-bezier(0.16,1,0.3,1)];
  }

  .collection-card:hover .collection-card-image img {
    @apply scale-105;
  }

  .collection-card-title {
    font-size: calc(0.875rem * var(--heading-font-scale, 1));
    font-weight: var(--font-heading-weight, 700);
    letter-spacing: calc(0.05em + var(--heading-letter-spacing, 0em));
    @apply mt-4;
  }

  .collection-card-count {
    @apply text-(--color-text-secondary) mt-1;
  }

  /* ==========================================================================
     Metro Layout - Collections List Bento Grid
     ========================================================================== */

  .collections-metro {
    grid-template-columns: repeat(var(--columns-mobile, 1), 1fr);
    grid-auto-flow: dense;
    @apply gap-3 md:gap-4 lg:gap-5 md:grid-cols-[repeat(var(--columns-tablet,2),1fr)] lg:grid-cols-[repeat(var(--columns-desktop,4),1fr)];
  }

  /* Metro item base */
  .collections-metro-item {
    @apply relative overflow-hidden transform-gpu bg-(--color-background-secondary) border-(length:--card-border-width) border-(--color-border) shadow-(--card-shadow);
    border-radius: var(--card-radius);
  }

  .collections-metro-item-inner {
    @apply relative w-full h-full overflow-hidden;
  }

  /* Metro item sizes */
  .collections-metro-item-large {
    grid-column: span 2 / span 2;
    grid-row: span 2 / span 2;
  }

  .collections-metro-item-wide {
    grid-column: span 2 / span 2;
  }

  .collections-metro-item-tall {
    grid-row: span 2 / span 2;
  }

  /* Mobile adjustments */
  @media (max-width: 767px) {
    .collections-metro-item-large,
    .collections-metro-item-wide {
      grid-column: span var(--columns-mobile) / span var(--columns-mobile);
    }

    .collections-metro-item-tall {
      grid-row: span 1 / span 1;
    }

    .collections-metro-item-large {
      grid-row: span 2 / span 2;
    }
  }

  /* Metro item aspect ratios */
  .collections-metro-item-normal .collections-metro-item-inner {
    @apply aspect-4/5 md:aspect-square;
  }

  .collections-metro-item-large .collections-metro-item-inner {
    @apply aspect-video sm:aspect-4/5 md:aspect-video;
  }

  .collections-metro-item-wide .collections-metro-item-inner {
    @apply aspect-video sm:aspect-4/5 md:aspect-video;
  }

  .collections-metro-item-tall .collections-metro-item-inner {
    @apply aspect-4/5 md:aspect-3/5;
  }

  /* ==========================================================================
     Metro Image - Cinematic zoom
     ========================================================================== */

  .collections-metro-item-image {
    @apply absolute inset-0 w-full h-full object-cover will-change-transform scale-100;
    transition: scale var(--transition-slow), opacity var(--transition-slow);
  }

  .collections-metro-item:hover .collections-metro-item-image {
    @apply scale-105;
  }

  /* ==========================================================================
     Metro Overlay - Always dark gradient for white text readability
     ========================================================================== */

  .collections-metro-item-overlay {
    @apply absolute inset-0 pointer-events-none z-1;
    background: linear-gradient(
      180deg,
      rgba(0, 0, 0, 0) 0%,
      rgba(0, 0, 0, 0.1) 40%,
      rgba(0, 0, 0, 0.5) 70%,
      rgba(0, 0, 0, 0.8) 100%
    );
    transition: background 0.5s ease;
  }

  .collections-metro-item:hover .collections-metro-item-overlay {
    background: linear-gradient(
      180deg,
      rgba(0, 0, 0, 0.05) 0%,
      rgba(0, 0, 0, 0.2) 40%,
      rgba(0, 0, 0, 0.65) 70%,
      rgba(0, 0, 0, 0.9) 100%
    );
  }

  /* ==========================================================================
     Metro Content - Refined typography
     ========================================================================== */

  .collections-metro-item-content {
    @apply absolute bottom-0 left-0 right-0 z-2 p-6 md:p-7;
  }

  .collections-metro-item-large .collections-metro-item-content {
    @apply p-8 md:p-10;
  }

  /* ==========================================================================
     Metro Title - Bold typography
     ========================================================================== */

  .collections-metro-item-title {
    @apply font-heading m-0 text-white leading-tight line-clamp-2 md:text-[calc(1.25rem*var(--heading-font-scale,1))];
    font-size: calc(1.125rem * var(--heading-font-scale, 1));
    font-weight: var(--font-heading-weight, 700);
    letter-spacing: calc(-0.02em + var(--heading-letter-spacing, 0em));
    text-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);
  }

  .collections-metro-item-large .collections-metro-item-title {
    @apply line-clamp-3 md:text-[calc(2rem*var(--heading-font-scale,1))];
    font-size: calc(1.5rem * var(--heading-font-scale, 1));
  }

  .collections-metro-item-wide .collections-metro-item-title {
    @apply md:text-[calc(1.5rem*var(--heading-font-scale,1))];
    font-size: calc(1.25rem * var(--heading-font-scale, 1));
  }

  /* ==========================================================================
     Metro Count - Product count display
     ========================================================================== */

  .collections-metro-item-count {
    @apply mt-2 text-sm text-white/80;
  }

  .collections-metro-item-large .collections-metro-item-count {
    @apply mt-3 text-base;
  }

  /* Header title line stagger - only for left alignment */
  .collections-wrapper[data-header-align='left'] .page-title .collections-header-title-line:nth-child(2) {
    margin-left: clamp(1.5rem, 10vw, 8rem);
  }

  .collections-wrapper[data-header-align='left'] .page-title .collections-header-title-line:nth-child(3) {
    margin-left: clamp(3rem, 18vw, 14rem);
  }
}
